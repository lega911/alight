/**
 * Angular Light
 * (c) 2015 Oleg Nechaev
 * Released under the MIT License.
 */!function(){function e(e){e=e||{};var t=e.globalControllers,n={},r={};return n.f$=r,function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,r,i=t?t:0;if(!this)throw new TypeError;if(r=this.length,0===r||i>=r)return-1;for(0>i&&(i=r-Math.abs(i)),n=i;r>n;n++)if(this[n]===e)return n;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof String.prototype.trimLeft&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}),r.browser=function(){var e,t=navigator.appName,n=navigator.userAgent.toLowerCase(),r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(r[2]=e[1]),r=r?[r[1],r[2]]:[t,navigator.appVersion,"-?"],{name:r[0],version_string:r[1],version:Number(r[1].match(/\d+/))}}();var e=!1,t=!1,n=!1,i=window.$;if(r.__jquery?(n=5,i=r.__jquery):(("chrome"===r.browser.name||"safari"===r.browser.name)&&(e=!0),"firefox"===r.browser.name&&(t=r.browser.version),"msie"===r.browser.name&&(n=r.browser.version)),r.text=n&&8>n?function(e,t){i(e).text(t)}:function(e,t){return 2!==arguments.length?e.textContent||e.innerText:void(void 0!==e.textContent?e.textContent=t:e.innerText=t)},r.html=n&&6>n?function(e,t){return 2!==arguments.length?i(e).html():void i(e).html(t)}:function(e,t){return 2!==arguments.length?e.innerHTML:void(e.innerHTML=t)},r.createComment=function(e){return document.createComment(e)},r.before=function(e,t){var n=e.parentNode;n.insertBefore(t,e)},r.after=function(e,t){var n=e.parentNode,r=e.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)},r.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},n&&9>n?(r.on=function(e,t,n){i(e).on(t,n)},r.off=function(e,t,n){i(e).off(t,n)}):(r.on=function(e,t,n){e.addEventListener(t,n,!1)},r.off=function(e,t,n){e.removeEventListener(t,n,!1)}),r.clone=function(e){return e.cloneNode(!0)},r.find=n&&8>n?function(e,t){return i(e).find(t)}:function(e,t){return e.querySelectorAll(t)},n&&8>n?(r.attr=function(e,t,n){return i(e).attr(t,n)},r.removeAttr=function(e,t){i(e).removeAttr(t)}):(r.attr=function(e,t,n){return 2===arguments.length?e.getAttribute(t):void e.setAttribute(t,n)},r.removeAttr=function(e,t){e.removeAttribute(t)}),r.isFunction=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},r.isObject=function(e){var t={};return e&&"[object Object]"===t.toString.call(e)},r.isArray=function(e){return e instanceof Array},r.val=n&&6>n?function(e,t){return 1===arguments.length?i(e).val():void i(e).val(t)}:function(e,t){return 1===arguments.length?e.value:void(e.value=t)},r.prop=n&&6>n?function(e,t,n){return 2===arguments.length?i(e).prop(t):void i(e).prop(t,n)}:function(e,t,n){return 2===arguments.length?e[t]:void(e[t]=n)},n&&8>n?(r.addClass=function(e,t){i(e).addClass(t)},r.removeClass=function(e,t){i(e).removeClass(t)}):(r.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},r.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")}),n&&8>n?(r.show=function(e){i(e).show()},r.hide=function(e){i(e).hide()}):(r.show=function(e){r.removeClass(e,"al-hide")},r.hide=function(e){r.addClass(e,"al-hide")}),r.children=n&&9>n||t&&4>t?function(e){return i(e).children()}:function(e){return e.children},r.childNodes=function(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)t.push(n[r]);return t},r.getAttributes=n&&8>n?function(e){var t={},n=i(e);return n.length&&i.each(n.get(0).attributes,function(e,r){var r=r.nodeName||r.name;e=n.attr(r),void 0!=e&&e!==!1&&(t[r]=e)}),t}:function(e){for(var t,n={},r=e.attributes,i=0,o=r.length;o>i;i++)t=r.item(i),n[t.nodeName]=t.value;return n},r.ready=n&&9>n?function(e){i(e)}:function(){function e(){n=!0,r.off(document,"DOMContentLoaded",e);for(var i=0;i<t.length;i++)t[i]();t.length=0}var t=[],n=!1;return r.on(document,"DOMContentLoaded",e),function(e){n?e():t.push(e)}}(),n&&9>n)var o=function(){},l=function(e){i.ajax({url:e.url,type:e.type||"GET",username:e.username,password:e.password,headers:e.headers,data:e.data}).then(e.success||o,e.error||o)};else var l=function(e){var t=new XMLHttpRequest;t.open(e.type||"GET",e.url,!0,e.username,e.password);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);e.success&&(t.onload=function(){t.status>=200&&t.status<400?e.success(t.responseText):e.error&&e.error()}),e.error&&(t.onerror=e.error),t.send(e.data||null)};r.ajaxCache={},r.ajax=function(e){if(e.username||e.password||e.headers||e.data||!e.cache)return l(e);var t=e.type||"GET",n=t+":"+e.url,i=r.ajaxCache[n];return i||(r.ajaxCache[n]=i={callback:[]}),i.result?void(e.success&&e.success(i.result)):(i.callback.push(e),void(i.loading||(i.loading=!0,l({type:t,url:e.url,success:function(e){i.loading=!1,i.result=e;for(var t=0;t<i.callback.length;t++)i.callback[t].success&&i.callback[t].success(e);i.callback.length=0},error:function(){i.loading=!1;for(var e=0;e<i.callback.length;e++)i.callback[e].error&&i.callback[e].error();i.callback.length=0}}))))},n&&8>n?(r.focus=function(e){i(e).focus()},r.blur=function(e){i(e).blur()}):(r.focus=function(e){e.focus()},r.blur=function(e){e.blur()}),function(){var e='@charset "UTF-8";[al-cloak],.al-hide{display:none !important;}',t=r.find(document,"head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}()}(),function(){var e,i,o,l,a,s,u,c,f,p,d,h,v,m;n.version="0.8.14",n.debug={useObserver:!1,observer:0,scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},n.controllers={},n.filters={},n.utilits={},n.directives={al:{},bo:{},ctrl:{}},n.text={},n.apps={},n.directivePreprocessor=l=function(e,t){var i,o,a,s,u,c,f,p;if(s="data-"===e.slice(0,5)?e.slice(5):e,o=s.indexOf("-"),0>o)return{noNs:!0};if(u=s.substring(0,o),s=s.substring(o+1).replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),c=t.scope.$ns&&t.scope.$ns.directives?t.scope.$ns.directives[u]:n.directives[u],!c)return{noNs:!0};if(f=c[s],!f)return{noDirective:!0};if(i={},r.isFunction(f))i.init=f;else{if(!r.isObject(f))throw"Wrong directive: "+u+"."+s;for(a in f)p=f[a],i[a]=p}if(i.priority=f.priority||0,i.restrict=f.restrict||"A",i.restrict.indexOf(t.attr_type)<0)throw"Directive has wrong binding (attribute/element): "+s;return i.$init=function(e,n,r,o){var a,c;return a=function(){var e,t,n,r,i;for(n=c.procLine,t=i=0,r=n.length;r>i;t=++i)if(e=n[t],e.fn.call(c),c.isDeferred){c.procLine=n.slice(t+1);break}return null},c={element:e,expression:n,scope:r,env:o,ns:u,name:s,args:t,directive:i,result:{},isDeferred:!1,procLine:l.ext,makeDeferred:function(){return c.isDeferred=!0,c.result.owner=!0,c.doBinding=!0,function(){return c.isDeferred=!1,a()}}},a(),c.result},i},function(){var e;return l.ext=e=[],e.push({code:"init",fn:function(){return this.directive.init&&(this.result=this.directive.init(this.element,this.expression,this.scope,this.env)||{}),r.isObject(this.result)?void 0:this.result={}}}),e.push({code:"templateUrl",fn:function(){var e,t;return t=this,this.directive.templateUrl?(e=this.makeDeferred(),r.ajax({cache:!0,url:this.directive.templateUrl,success:function(n){return t.directive.template=n,e()},error:e})):void 0}}),e.push({code:"template",fn:function(){var e;if(this.directive.template){if(1===this.element.nodeType)return r.html(this.element,this.directive.template);if(8===this.element.nodeType&&(e=document.createElement("p"),e.innerHTML=this.directive.template.trimLeft(),e=e.firstChild,r.after(this.element,e),this.element=e,!this.directive.scope))return this.directive.scope=!0}}}),e.push({code:"scope",fn:function(){var e;return this.directive.scope?(e=this.scope,this.scope=e.$new("isolate"===this.directive.scope),this.result.owner=!0,this.doBinding=!0):void 0}}),e.push({code:"link",fn:function(){return this.directive.link?this.directive.link(this.element,this.expression,this.scope,this.env):void 0}}),e.push({code:"scopeBinding",fn:function(){return this.doBinding?n.applyBindings(this.scope,this.element,{skip_attr:this.env.skippedAttr()}):void 0}})}(),v=function(){var e;return e=function(e,t,n){var r;return"A"===t.attr_type?(r=n||{},r.priority=-5,r.is_attr=!0,r.name=e,r.attrName=e,r.element=t.element,t.list.push(r)):void 0},function(t,r){var i;return r.skip_attr.indexOf(t)>=0?e(t,r,{skip:!0}):(i=n.directivePreprocessor(t,r),i.noNs?e(t,r):i.noDirective?e(t,r,{noDirective:!0}):r.list.push({name:t,directive:i,priority:i.priority,attrName:t}))}}(),h=function(e,t){return e.priority===t.priority?0:e.priority>t.priority?-1:1},i=function(e,t,i,o){var l,a,s;return a=t,a.indexOf(n.utilits.pars_start_tag)<0?void 0:(l=function(t){return r.attr(e,o,t)},s=i.$watchText(a,l,{readOnly:!0}),l(s.value))},m=function(e,t){var r,i,o;return i=t.data,i.indexOf(n.utilits.pars_start_tag)<0?void 0:(r=function(e){return t.nodeValue=e},o=e.$watchText(i,r,{readOnly:!0}),r(o.value))},o=function(e,t){var r,i,o,l,a,s,u,c,f,p,d;if(p=t.nodeValue.trimLeft(),"directive:"===p.slice(0,10)){if(p=p.slice(10).trimLeft(),u=p.indexOf(" "),u>=0?(o=p.slice(0,+(u-1)+1||9e9),d=p.slice(u+1)):(o=p,d=""),r={list:c=[],element:t,attr_type:"M",scope:e,skip_attr:[]},v(o,r),i=c[0],i.noDirective)throw"Directive not found: "+i.name;l=i.directive,s={element:t,attrName:o,attributes:[],skippedAttr:function(){return[]}},n.debug.directive&&console.log("bind",i.attrName,d,i);try{if(f=l.$init(t,d,e,s),f&&f.start)return f.start()}catch(h){return a=h,n.exceptionHandler(a,"Error in directive: "+i.name,{value:d,env:s,scope:e,element:t})}}},f=function(){var e,t;return t=function(e,t){var n,i,o,l,a;for(1===arguments.length&&(t=!0),l=this.attributes,o=0,i=l.length;i>o;o++)if(n=l[o],n.attrName===e)return t&&(n.skip=!0),a=r.attr(this.element,e),a||!0},e=function(){var e,t,n,r,i;for(r=this.attributes,i=[],n=0,t=r.length;t>n;n++)e=r[n],e.skip&&i.push(e.attrName);return i},function(o,l,a){var s,c,f,p,d,m,g,$,b,y,w,x,k,D,_,O,A,S,C,T;if(a=a||{},C=!1,S=a.skip_attr||[],S instanceof Array||(S=[S]),!a.skip_top){s={list:x=[],element:l,skip_attr:S,attr_type:"E",scope:o},c=l.nodeName.toLowerCase(),v(c,s),s.attr_type="A",p=r.getAttributes(l);for(c in p)f=p[c],v(c,s);for(x=x.sort(h),D=0,y=x.length;y>D;D++)if(d=x[D],!d.skip){if(d.noDirective)throw"Directive not found: "+d.name;if(d.skip=!0,T=r.attr(l,d.attrName),d.is_attr)i(l,T,o,d.attrName);else{m=d.directive,$={element:l,attrName:d.attrName,attributes:x,takeAttr:t,skippedAttr:e},n.debug.directive&&console.log("bind",d.attrName,T,d);try{A=m.$init(l,T,o,$),A&&A.start&&A.start()}catch(L){g=L,n.exceptionHandler(g,"Error in directive: "+d.attrName,{value:T,env:$,scope:o,element:l})}if(A&&A.owner){C=!0;break}}}}if(!C)for(O=r.childNodes(l),_=0,w=O.length;w>_;_++)k=O[_],k&&(b=u[k.nodeType],b&&b(o,k));return null}}(),u={1:f,3:m,8:o},e=function(t){if(this instanceof e)return this;t=t||{};var r;if(t.prototype){var i=function(){};i.prototype=t.prototype;var o=new i,l=e.prototype;for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a]);var s=function(){};s.prototype=o,r=new s}else r=new e;var u,c;return r.$system=c={watches:{},watchList:[],watchAny:[],watchAnyAll:[],watchFinishScan:[],watchFinishScanAll:[],root:r,children:[],scan_callbacks:[],destroy_callbacks:[],finishBinding_callbacks:[],finishBinding_lock:!1},c.useObserver="boolean"==typeof t.useObserver?t.useObserver:n.debug.useObserver,c.useObserver&&(c.useObserver=!!Object.observe),c.useObserver&&(c.lineHead=null,c.lineTail=null,c.lineActive=!1,c.prevSibling=null,c.nextSibling=null,c.obList=[],c.obFire={},c.ob=u=n.observer.observe(r,{rootEvent:function(e,t){var i,o,l,a;for(n.debug.observer&&console.warn("Reobserve",e),a=r.$system.children,l=0,o=a.length;o>l;l++)i=a[l],i.$$rebuildObserve(e,t);return null}}),c.observers=[u]),r},n.Scope=e,e.prototype.$$rebuildObserve=function(e,t){var r,i,o,l,a;for(a=this,n.observer.reobserve(a.$system.ob,e),l=a.$system.children,o=0,i=l.length;i>o;o++)r=l[o],r.$$rebuildObserve(e,t);return n.observer.fire(a.$system.ob,e,t)},e.prototype.$new=function(e){var t,r;return r=this,e?t=n.Scope():(r.$system.ChildScope||(r.$system.ChildScope=function(){var e,t,i,o;return i=r.$system.root,this.$system=o={watches:{},watchList:[],watchAny:[],watchFinishScan:[],root:i,children:[],destroy_callbacks:[]},this.$parent=null,i.$system.useObserver&&(e=this,o.prevSibling=null,o.nextSibling=null,o.lineActive=!1,o.obFire={},o.ob=t=n.observer.observe(this,{rootEvent:function(t,r){var i,o,l,a;for(n.debug.observer&&console.warn("Reobserve",t),a=e.$system.children,l=0,o=a.length;o>l;l++)i=a[l],i.$$rebuildObserve(t,r);return null}}),i.$system.observers.push(t)),this},r.$system.ChildScope.prototype=r),t=new r.$system.ChildScope),t.$parent=r,r.$system.children.push(t),t},s=function(e){var t,n,r;return n=e.$system,n.lineActive?void 0:(t=n.root.$system,n.lineActive=!0,r=t.lineTail,r?(t.lineTail=r.$system.nextSibling=e,n.prevSibling=r):t.lineHead=t.lineTail=e)},function(){var t,i;return t=function(e){return this.cb=e},i=function(e,n,r,i){var o,l,a;return l=e.$system,o=l.root.$system,a=new t(i),l[n].push(a),o[r].push(a),{stop:function(){var e,t;return t=l[n],e=t.indexOf(a),e>=0&&t.splice(e,1),t=o[r],e=t.indexOf(a),e>=0?t.splice(e,1):void 0}}},e.prototype.$watch=function(e,t,o){var l,a,u,c,f,p,d,h,v,m,g,$,b,y,w,x,k,D;if(w=this,x=w.$system,y=x.root.$system,o===!0?o={isArray:!0}:o||(o={}),o.is_array&&(o.isArray=!0),r.isFunction(e))u=e,p=n.utilits.getId(),c=!0;else{if(c=!1,u=null,e=e.trim(),"::"===e.slice(0,2)&&(e=e.slice(2),o.oneTime=!0),p=e,"$any"===p)return i(w,"watchAny","watchAnyAll",t);if("$finishScan"===p)return i(w,"watchFinishScan","watchFinishScanAll",t);if("$destroy"===p)return x.destroy_callbacks.push(t);if("$finishBinding"===p)return y.finishBinding_callbacks.push(t);p=o.deep?"d#"+p:o.isArray?"a#"+p:"v#"+p}if(n.debug.watch&&console.log("$watch",e),a=x.watches[p])o.readOnly||(a.extraLoop=!0),b=a.value;else{if(c||(l=w.$compile(e,{noBind:!0,full:!0}),u=l.fn),b=k=u(w),o.deep&&(k=n.utilits.clone(k),o.isArray=!1),x.watches[p]=a={isArray:Boolean(o.isArray),extraLoop:!o.readOnly,deep:o.deep,value:k,callbacks:[],exp:u,src:""+e},f=!1,y.useObserver&&!c&&!o.oneTime&&!o.deep&&l.isSimple&&l.simpleVariables.length&&(f=!0,a.isArray?a.value=null:l.isSimple<2&&(f=!1),f))for(a.isObserved=!0,$=l.simpleVariables,h=0,d=$.length;d>h;h++)D=$[h],v=n.observer.watch(x.ob,D,function(){return x.obFire[p]?void 0:(x.obFire[p]=!0,y.obList.push([w,a]))});o.isArray&&!f&&(a.value=r.isArray(k)?k.slice():null,b=a.value),f||(x.watchList.push(a),s(w))}return m={$:a,value:b},o.oneTime&&(g=t,t=function(e){return void 0!==e?(m.stop(),g(e)):void 0}),a.callbacks.push(t),m.stop=function(){var e;if(e=a.callbacks.indexOf(t),e>=0){if(a.callbacks.splice(e,1),0!==a.callbacks.length)return;if(delete x.watches[p],e=x.watchList.indexOf(a),e>=0)return x.watchList.splice(e,1)}},o.init&&t(m.value),m}}(),function(){return e.prototype.$compile=function(e,t){var r,i,o,l,a,s,u;return t=t||{},u=this,s={},e=e.trim(),"::"===e.slice(0,2)&&(e=e.slice(2),s.oneTime=!0),t.stringOrOneTime&&(t.string=!s.oneTime),a=e+"#",a+=t.no_return?"+":"-",a+=t.string?"s":"v",t.input&&(a+=t.input.join(",")),r=n.utilits.compile.expression(e,{scope:u,hash:a,no_return:t.no_return,string:t.string,input:t.input,rawExpression:t.rawExpression}),l=r.fn,o=r.filters,s.rawExpression=r.rawExpression,s.isSimple=r.isSimple,s.simpleVariables=r.simpleVariables,o&&o.length&&(l=n.utilits.filterBuilder(u,l,o),t.string&&(i=l,l=function(){var e=i.apply(this,arguments);return""+(e||(null==e?"":e))})),s.fn=t.noBind?l:(t.input||[]).length<4?function(){var r;try{return l(u,arguments[0],arguments[1],arguments[2])}catch(i){return r=i,n.exceptionHandler(r,"Wrong in expression: "+e,{src:e,cfg:t})}}:function(){var r,i,o,a,s;try{for(r=[u],s=0,a=arguments.length;a>s;s++)o=arguments[s],r.push(o);return l.apply(null,r)}catch(c){return i=c,n.exceptionHandler(i,"Wrong in expression: "+e,{src:e,cfg:t})}},t.full?s:s.fn}}(),e.prototype.$eval=function(e){return this.$compile(e,{noBind:!0})(this)},e.prototype.$getValue=function(e){return this.$eval(e)},e.prototype.$setValue=function(e,t){var n;return(n=this.$compile(e+" = $value",{input:["$value"],no_return:!0,noBind:!0}))(this,t)},e.prototype.$destroy=function(){var e,t,r,i,o,l,a,s,u,c,f,p,d,h,v;for(h=this,v=h.$system,d=h.$system.root.$system,f=v.destroy_callbacks,s=0,o=f.length;o>s;s++)(e=f[s])(h);for(v.destroy_callbacks=[],d.useObserver&&(!function(){var e,t,r;return r=v.ob,t=d.observers,e=t.indexOf(r),e>=0&&t.splice(e,1),n.observer.unobserve(r)}(),v.lineActive&&(v.lineActive=!1,u=v.prevSibling,a=v.nextSibling,u?u.$system.nextSibling=a:d.lineHead=a,a?a.$system.prevSibling=u:d.lineTail=u)),p=v.children.slice(),c=0,l=p.length;l>c;c++)i=p[c],i.$destroy();return h.$parent&&(r=h.$parent.$system.children.indexOf(h),h.$parent.$system.children.splice(r,1)),h.$parent=null,v.watches={},v.watchList=[],t=function(e,t){var n,i,o,l,a;for(i=d[t],o=v[e],l=0,n=o.length;n>l;l++)a=o[l],r=i.indexOf(a),r>=0&&i.splice(r,1);return v[e].length=0},t("watchAny","watchAnyAll"),t("watchFinishScan","watchFinishScanAll")},a=function(){return window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()}}(),c=function(e,t){var n,r,i,o,l,a;if(null===e||null===t)return!0;if(o=typeof e,l=typeof t,o!==l)return!0;if("object"===o){if(e.length!==t.length)return!0;for(n=i=0,r=e.length;r>i;n=++i)if(a=e[n],a!==t[n])return!0}return!1},p=function(e,t){var i,o,l,a,s,u,f,p,d,h,v,m,g,$,b,y,w,x,k,D,_;for(s=!1,a=0,k=0,h=[],$=[e];$;){for(w=$[0],u=1;w;){for(x=w.$system,k+=x.watchList.length,b=x.watchList,m=0,p=b.length;p>m;m++)if(_=b[m],t.src=_.src,f=_.value,D=_.exp(w),f!==D){if(v=!1,_.isArray?(i=r.isArray(f),o=r.isArray(D),i===o?i&&c(f,D)&&(_.value=D.slice(),v=!0):(v=!0,_.value=o?D.slice():null)):_.deep?n.utilits.equal(f,D)||(v=!0,_.value=n.utilits.clone(D)):(v=!0,_.value=D),v)for(v=!1,a++,_.extraLoop&&(s=!0),y=_.callbacks.slice(),g=0,d=y.length;d>g;g++)l=y[g],l.call(w,D);n.debug.scan>1&&console.log("changed:",_.src)}x.children.length&&h.push(x.children),w=$[u++]}$=h.shift()}return t.total=k,t.obTotal=0,t.changes=a,t.extraLoop=s},d=function(e,t){var i,o,l,a,s,u,f,p,d,h,v,m,g,$,b,y,w,x,k,D,_,O,A,S,C,T,L,M,B,E,j;for(s=!1,a=0,T=0,b=0,O=e.$system,w=O.observers,g=0,f=w.length;f>g;g++)$=w[g],n.observer.deliver($);for(x=O.obList,y=0,p=x.length;p>y;y++)if(E=x[y],S=E[0],B=E[1],S.$system.obFire={},t.src=B.src,u=B.value,M=B.exp(S),u!==M)for(B.isArray||(B.value=M),a++,B.extraLoop&&(s=!0),k=B.callbacks.slice(),A=0,d=k.length;d>A;A++)l=k[A],l.call(S,M);for(b+=O.obList.length,O.obList.length=0,S=O.lineHead;S;){for(C=S.$system,T+=C.watchList.length,D=C.watchList,L=0,h=D.length;h>L;L++)if(B=D[L],t.src=B.src,u=B.value,M=B.exp(S),u!==M){if(m=!1,B.isArray?(i=r.isArray(u),o=r.isArray(M),i===o?i&&c(u,M)&&(B.value=M.slice(),m=!0):(m=!0,B.value=o?M.slice():null)):B.deep?n.utilits.equal(u,M)||(m=!0,B.value=n.utilits.clone(M)):(m=!0,B.value=M),m)for(m=!1,a++,B.extraLoop&&(s=!0),_=B.callbacks.slice(),j=0,v=_.length;v>j;j++)l=_[j],l.call(S,M);n.debug.scan>1&&console.log("changed:",B.src)}S=C.nextSibling}return t.total=T,t.obTotal=b,t.changes=a,t.extraLoop=s},e.prototype.$scanAsync=function(e){return this.$scan({late:!0,callback:e})},e.prototype.$scan=function(e){var t,i,o,l,s,u,c,f,h,v,m,g,$,b,y,w,x,k;if(e=e||{},r.isFunction(e)&&(e={callback:e}),b=this.$system.root,y=b.$system,e.callback&&y.scan_callbacks.push(e.callback),e.late){if(y.lateScan)return;return y.lateScan=!0,void n.nextTick(function(){return y.lateScan?b.$scan():void 0})}if("scaning"===y.status)return void(y.extraLoop=!0);y.lateScan=!1,y.status="scaning",x=y.scan_callbacks.slice(),y.scan_callbacks.length=0,n.debug.scan&&(k=a()),f=10;try{for($={total:0,obTotal:0,changes:0,extraLoop:!1,src:""};f;){if(f--,y.extraLoop=!1,y.useObserver?d(b,$):p(b,$),$.changes)for(m=y.watchAnyAll,h=0,s=m.length;s>h;h++)(i=m[h])();if(!$.extraLoop&&!y.extraLoop)break}n.debug.scan&&(o=a()-k,console.log("$scan: ("+(10-f)+") "+$.total+" + "+$.obTotal+" / "+o+"ms"))}catch(D){l=D,n.exceptionHandler(l,"$scan, error in expression: "+$.src,{src:$.src,result:$})}finally{for(y.status=null,v=0,u=x.length;u>v;v++)t=x[v],t.call(b);for(g=y.watchFinishScanAll,w=0,c=g.length;c>w;w++)(t=g[w])()}if(0===f)throw"Infinity loop detected"},function(){var t;return t=function(e){var t,n,r;for(r=0,n=e.length;n>r;r++)if(t=e[r],"expression"===t.type&&!t["static"])return!1;return!0},e.prototype.$compileText=function(e,r){var i,o,l,a,s,u,c,f,p,d,h,v;if(p=this,r=r||{},h=n.utilits.compile.buildSimpleText(e,null))return f=r.fullResponse?{type:"fn",fn:h.fn,isSimple:h.isSimple,simpleVariables:h.simpleVariables}:h.fn;if(e.indexOf(n.utilits.pars_start_tag)<0)return f=r.result_on_static?r.fullResponse?{type:"text",text:e}:e:r.fullResponse?{type:"fn",isStatic:!0,fn:function(){return e}}:function(){return e};for(l=n.utilits.parsText(e),l.scope=p,v=0,d=!0,c=0,u=l.length;u>c;c++)o=l[c],"expression"===o.type&&("="===o.list[0][0]&&(o.list[0]="#bindonce "+o.list[0].slice(1)),a=o.list.join(" | "),"#"===a[0]?(d=!1,function(e){var i,o;return i=!1,o={data:e,setter:function(t){return e.value=t},"finally":function(n){return 1===arguments.length&&o.setter(n),e["static"]=!0,i&&r.onStatic&&t(l)?r.onStatic():void 0}},n.text.$base(p,e,o),i=!0}(o),o["static"]||v++):(i=p.$compile(a,{stringOrOneTime:!0,full:!0,rawExpression:!0,noBind:!0}),i.oneTime?(d=!1,function(e,n){return e.fn=function(){var i;return i=n.fn(p),void 0===i?"":(null===i&&(i=""),e.fn=function(){return i},e["static"]=!0,r.onStatic&&t(l)&&r.onStatic(),i)}}(o,i)):(o.fn=i.fn,i.rawExpression?(o.re=i.rawExpression,i.isSimple&&(o.isSimple=!0,o.simpleVariables=i.simpleVariables)):d=!1),v++));return v?(d?(h=n.utilits.compile.buildSimpleText(e,l),f=r.fullResponse?{type:"fn",fn:h.fn,isSimple:h.isSimple,simpleVariables:h.simpleVariables}:h.fn):(f=n.utilits.compile.buildText(e,l),r.fullResponse&&(f={type:"fn",fn:f})),f):(s=n.utilits.compile.buildText(e,l),e=s(),r.result_on_static?f=r.fullResponse?{type:"text",text:e}:e:(f=function(){return e},r.fullResponse&&(f={type:"fn",isStatic:!0,fn:f})),f)}}(),e.prototype.$evalText=function(e){return this.$compileText(e)(this)},e.prototype.$watchText=function(e,t,r){var i,o,l,a,u,c,f,p,d,h,v;if(p=this,d=p.$system,r=r||{},n.debug.watchText&&console.log("$watchText",e),v=d.watches,o=v[e])r.readOnly||(o.extraLoop=!0);else{if(o={extraLoop:!r.readOnly,isArray:!1,callbacks:[],onStatic:[],src:e},i=p.$compileText(e,{fullResponse:!0,result_on_static:!0,onStatic:function(){var t,n,r,l,a;for(a=i.fn.call(p),o.exp=function(){return a},p.$scanAsync(function(){var t;return o.callbacks.length=0,delete v[e],t=d.watchList.indexOf(o),t>=0?d.watchList.splice(t,1):void 0}),l=o.onStatic,r=0,n=l.length;n>r;r++)(t=l[r])(a);return null}}),"text"===i.type)return{value:i.text};if(o.exp=i.fn,o.value=i.fn(p),v[e]=o,i.isSimple&&d.root.$system.useObserver)for(o.isObserved=!0,f=i.simpleVariables,a=0,l=f.length;l>a;a++)h=f[a],u=n.observer.watch(d.ob,h,function(){return d.obFire[e]?void 0:(d.obFire[e]=!0,d.root.$system.obList.push([p,o]))});else d.watchList.push(o),s(p)}return r.onStatic&&o.onStatic.push(r.onStatic),o.callbacks.push(t),c={$:o,value:o.value,exp:o.exp,stop:function(){var n;if(n=o.callbacks.indexOf(t),n>=0){if(o.callbacks.splice(n,1),0!==o.callbacks.length)return;if(delete v[e],n=d.watchList.indexOf(o),n>=0)return d.watchList.splice(n,1)}}}},n.nextTick=function(){var e,t,r;return r=null,t=[],e=function(){var e,i,o,l,a,s,u;for(r=null,i=t.slice(),t.length=0,s=0,a=i.length;a>s;s++){l=i[s],e=l[0],u=l[1];try{e.call(u)}catch(c){o=c,n.exceptionHandler(o,"$nextTick, error in function",{fn:e})}}return null},function(n){return t.push([n,this]),r?void 0:r=setTimeout(e,0)}}(),n.getController=function(e,r){var i;if(i=r.$ns&&r.$ns.controllers?r.$ns.controllers[e]:n.controllers[e]||t&&window[e],!i)throw"Controller isn't found: "+e;if(!(i instanceof Function))throw"Wrong controller: "+e;return i},n.getFilter=function(e,t){var r;if(r=t.$ns&&t.$ns.filters?t.$ns.filters[e]:n.filters[e],!r)throw"Filter not found: "+e;return r},n.text.$base=function(e,t,r){var i,o,l,a,s;if(l=t.list[0],s=l.indexOf(" "),0>s?(o=l.slice(1),l=""):(o=l.slice(1,s),l=l.slice(s)),i=n.text[o],!i)throw"No directive alight.text."+o;return t.list.length>1&&(a=n.utilits.filterBuilder(e,null,t.list.slice(1)),r.setter=function(e){return t.value=a(e)}),i(r.setter,l,e,r)},n.applyBindings=function(e,t,r){var i,o,l,a,s,u;if(!t)throw"No element";if(e||(e=new n.Scope),u=e.$system.root.$system,o=!u.finishBinding_lock,o&&(u.finishBinding_lock=!0),r=r||{},f(e,t,r),o)for(u.finishBinding_lock=!1,a=u.finishBinding_callbacks.slice(),u.finishBinding_callbacks.length=0,s=0,l=a.length;l>s;s++)(i=a[s])();return null},n.bootstrap=function(e){var t,i,o,l,a,s,u,c,f,p,d,h,v;if(e||(e=r.find(document,"[al-app]")),e instanceof HTMLElement&&(e=[e]),r.isArray(e)||"number"==typeof e.length)for(c=0,s=e.length;s>c;c++)a=e[c],a.ma_bootstrapped||(a.ma_bootstrapped=!0,t=r.attr(a,"al-app"),t?"#"===t[0]?(h=t.split(" "),v=h[0].substring(1),o=h[1],d=n.apps[v],d?o&&console.error('New controller on exists scope: al-app="'+t+'"'):(n.apps[v]=d=n.Scope(),o&&(i=n.getController(o,d))(d))):(d=n.Scope(),(i=n.getController(t,d))(d)):d=n.Scope(),n.applyBindings(d,a,{skip_attr:"al-app"}));else{if(r.isObject(e)&&e.$el){for(d=n.Scope({prototype:e}),p=r.find(document.body,e.$el),f=0,u=p.length;u>f;f++)l=p[f],n.applyBindings(d,l);return d}n.exceptionHandler("Error in bootstrap","Error in bootstrap",{input:e})}return null}}.call(this),function(){var e,t;n.utilits.getId=function(){var e,t;return t=function(){var e,t,n,r,i,o;for(o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";n>0;)e=Math.floor(n/62),r=62*e,t=n-r,n=e,i=o[t]+i;return i}(),e=1,function(){return t+"#"+e++}}(),n.utilits.filterBuilder=function(e,t,r){var i,o,l,a,s,u,c,f;if(!r||!r.length)return t;for(u=0,c=r.length;c>u;u++)o=r[u],i=o.match(/\s*([\w\d_]+?)\s*:\s*(.*?)\s*$/),i?(s=i[1],f=i[2]):(s=o.trim(),f=null),l=n.getFilter(s,e,f),a=l.call(e,f,e),t=t?function(e,t){return function(n){return e(t(n))}}(a,t):a;return t},n.utilits.clone=e=function(t){var n,r,i,o;if(!t)return t;if("object"==typeof t){if(t instanceof Array)return i=function(){var r,i,o;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],o.push(e(n));return o}();if(t instanceof Date)return new Date(t.valueOf());if(t.nodeType&&"function"==typeof t.cloneNode)return t;i={};for(r in t)o=t[r],"$alite_id"!==r&&"$$observer"!==r&&(i[r]=e(o));return i}return t},n.utilits.equal=t=function(e,n){var r,i,o,l,a,s,u,c;if(!e)return e===n;if(s=typeof e,u=typeof n,s!==u)return!1;if("object"===s){if(e instanceof Array){if(e.length!==n.length)return!1;for(r=i=0,l=e.length;l>i;r=++i)if(c=e[r],!t(c,n[r]))return!1;return!0}if(e instanceof Date)return e.valueOf()===n.valueOf();if(e.nodeType&&"function"==typeof e.cloneNode)return e===n;a={};for(o in e)if(c=e[o],"$alite_id"!==o&&"$$observer"!==o&&(a[o]=!0,!t(c,n[o])))return!1;for(o in n)if(c=n[o],"$alite_id"!==o&&"$$observer"!==o&&!a[o]&&!t(c,e[o]))return!1;return!0}return e===n},n.utilits.dataByElement=function(e,t){var n;return n=e.al,n||(e.al=n={}),t?(n[t]||(n[t]={}),n[t]):n},n.exceptionHandler=function(e,t,n){var r;return console.warn(t,n),r="string"==typeof e?e:e.stack,console.error(r)}}.call(this),function(){var e,t;t=["instanceof","typeof","in","null","true","false","undefined","function","return"],n.utilits.parsExpression=function(e,r){var i,o,l,a,s,u,c,f,p,d,h,v,m,g,$,b,y,w,x,k,D,_,O,A,S,C,T,L;if(r=r||{},c=r.input||[],u=0,_=[],x=0,L=[],T=[],S=[],C=[],O=[],f=!c.length,w=function(n,r,i,o){var l,a,s,f,p,d,h;for(d="",h=-1,p=!1,f=function(){var e;if(d&&!(t.indexOf(d)>=0||(e=d.split(".")[0],c.indexOf(e)>=0||d[0].match(/[\d\.]/))))return L.push(h),T.push(d),S.push(!1),C.push(!1),!0};u<e.length;){if(s=e[u-1],l=e[u],u+=1,a=e[u],i&&(l.match(/[\d\w\u0410-\u044F\u0401\u0451_\.\$]/)?(d||(h=u-1),d+=l):("}"===r&&":"===e.substring(u-1).trim()[0]&&(d=""),f()&&(p=u),d="")),l===r)return;p&&" "!==l&&p!==u&&(p=!1),"="===l&&"="!==s&&"="!==a&&(S[S.length-1]=!0),"("!==l||o?"["!==l||o?"{"!==l||o?'"'===l?w(n+1,'"',!1,!0):"'"===l?w(n+1,"'",!1,!0):"|"===l&&0===n&&("|"===a?u+=1:(i=!1,_.push(e.substring(x,u-1)),x=u)):w(n+1,"}",!0):w(n+1,"]",i):(p&&(C[C.length-1]=!0),w(n+1,")",i))}return 0===n&&_.push(e.substring(x)),f()},w(0,null,!0),L.length){for(a=_[0],s=d=L.length-1;d>=0;s=d+=-1){if($=L[s],A=T[s],i=S[s],p=C[s],p||i||O.push(A),(p||i)&&(f=!1),l=A.split("."),o=!1,l.length>1&&!i&&(o=p?l.length>2:!0),o){if(b=null,"this"===l[0]&&(l[0]="$$scope",2===l.length&&(b="$$scope."+l[1])),!b)if(h=[],h.push("($$=$$scope."+l[0]+",$$==null)?undefined:"),p){for(k=l.slice(1,+(l.length-3)+1||9e9),g=0,v=k.length;v>g;g++)s=k[g],h.push("($$=$$."+s+",$$==null)?undefined:");h.push("$$."+l[l.length-2]),b="("+h.join("")+")."+l[l.length-1]}else{for(D=l.slice(1,+(l.length-2)+1||9e9),y=0,m=D.length;m>y;y++)s=D[y],h.push("($$=$$."+s+",$$==null)?undefined:");h.push("$$."+l[l.length-1]),b="("+h.join("")+")"}}else b="this"===A?"$$scope":"this"===l[0]?"$$scope."+l.slice(1).join("."):"$$scope."+A;a=a.slice(0,$)+b+a.slice($+A.length)}_[0]=a}return n.debug.parser&&console.log("parser",_),_.length>1&&(f=!1),r.fullResponse?{result:_,simpleVariables:O,isSimple:f}:_},n.utilits.pars_start_tag="{{",n.utilits.pars_finish_tag="}}",e=function(e){var t,r,i,o,l,a,s,u,c;return c=n.utilits.pars_start_tag,r=n.utilits.pars_finish_tag,s=[],o=0,a=0,i=function(t){var n;return t=t||1,n=e.substring(a,o-t),a=o,n},u=null,l=function(t,n,a){var c,f,p,d;for(t||(u={type:"expression",list:[]},s.push(u)),d=null,c=null;o<e.length;){if(d=c,c=e[o],o+=1,f=d+c,p=e[o],c===n)return;if(!a){if(f===r&&0===t)return u.list.push(i(2)),!0;"("===c?l(t+1,")"):"{"===c?l(t+1,"}"):'"'===c?l(t+1,'"',!0):"'"===c?l(t+1,"'",!0):"|"===c&&0===t&&("|"===p?o+=1:u.list.push(i()))}}},t=function(){var t,n,r,a,u;for(r=null,t=null;o<e.length;)if(r=t,t=e[o],o+=1,n=r+t,n===c){if(u=i(2),u&&s.push({type:"text",value:u}),!l(0))throw"Wrong expression"+e;t=null}return a=i(-1),a?s.push({type:"text",value:a}):void 0},t(),n.debug.parser&&console.log("parsText",s),s},function(){var t,r;return t={},r=function(e){var t,n,r;return r=function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)t=e[r],n={type:t.type,value:t.value},t.list&&(n.list=t.list.slice()),o.push(n);return o}()},n.utilits.parsText=function(n){var i;return i=t[n],i||(t[n]=i=e(n)),r(i)}}()}.call(this),function(){var e;n.utilits.compile=e={},e.cache={},e.Function=Function,e.expression=function(t,r){var i,o,l,a,s,u,c,f,p,d,h,v,m,g,$;if(p=r.hash,f=e.cache[p])return f;if(f={fn:null,isSimple:0,simpleVariables:null},l=t,m=r.no_return||!1,s=n.utilits.parsExpression(l,{input:r.input,fullResponse:!0}),a=s.result,s.isSimple)for(f.isSimple=2,f.simpleVariables=s.simpleVariables,g=s.simpleVariables,h=0,v=g.length;v>h;h++)if(d=g[h],d.indexOf(".")<0){f.isSimple=1;break}l=a[0],u=a.slice(1),m?$="var $$;"+l:r.string&&!u.length?($="var $$, __ = ("+l+"); return '' + (__ || (__ == null?'':__))",r.rawExpression&&(f.rawExpression="(__="+l+") || (__ == null?'':__)")):$="var $$;return ("+l+")";try{r.input?(i=r.input.slice(),i.unshift("$$scope"),i.push($),c=e.Function.apply(null,i)):c=e.Function("$$scope",$)}catch(b){throw o=b,n.exceptionHandler(o,"Wrong expression: "+t,{src:t,cfg:r}),"Wrong expression: "+l}return f.fn=c,f.filters=u.length?u:null,e.cache[p]=f},e.cacheText={},e.buildText=function(t,n){var r,i,o,l,a,s;if(i=e.cacheText[t])return function(){return i.call(n)};for(s=[],o=l=0,a=n.length;a>l;o=++l)r=n[o],"expression"===r.type?s.push(r.fn?"this["+o+"].fn(this.scope)":"((x=this["+o+"].value) || (x == null?'':x))"):r.value&&s.push('"'+r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"');return s=s.join(" + "),i=e.Function("var x; return ("+s+")"),e.cacheText[t]=i,function(){return i.call(n)}},e.cacheSimpleText={},e.buildSimpleText=function(t,n){var r,i,o,l,a,s,u,c,f;if(a=e.cacheSimpleText[t],a||!n)return a||null;
for(c=[],l=!0,f=[],o=s=0,u=n.length;u>s;o=++s)r=n[o],"expression"===r.type?(c.push("("+r.re+")"),r.isSimple?f.push.apply(f,r.simpleVariables):l=!1):r.value&&c.push('"'+r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"');return c=c.join(" + "),i=e.Function("$$scope","var $$, __; return ("+c+")"),a={fn:i},l&&(a.isSimple=!0,a.simpleVariables=f),e.cacheSimpleText[t]=a,a}}.call(this),function(){var e,t,i,o,l,a,s,u;for(n.text.bindonce=function(e,t,n,r){return r["finally"](n.$eval(t))},t=n.directives.al,t.debug={priority:5e3,init:function(e,t,r){return n.debug=t?r.$eval(t):-1}},t.text=function(e,t,n){var i,o;return i="",o={start:function(){return o.watchModel(),o.initDom()},updateDom:function(t){return(void 0===t||null===t)&&(t=""),r.text(e,t)},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=e.value},initDom:function(){return o.updateDom(i)}}},t.value=function(e,t,i){var o,l;return o=null,l={changing:!1,onDom:function(){return r.on(e,"input",l.updateModel),r.on(e,"change",l.updateModel),i.$watch("$destroy",l.offDom)},offDom:function(){return r.off(e,"input",l.updateModel),r.off(e,"change",l.updateModel)},updateModel:function(){return n.nextTick(function(){var n;return n=r.val(e),l.changing=!0,i.$setValue(t,n),i.$scan(function(){return l.changing=!1})})},watchModel:function(){var e;return e=i.$watch(t,l.updateDom,{readOnly:!0}),o=e.value},updateDom:function(t){return l.changing?void 0:void 0!==t&&null!==t?r.val(e,t):void 0},initDom:function(){return l.updateDom(o)},start:function(){return l.onDom(),l.watchModel(),l.initDom()}}},e=function(e){return{priority:10,init:function(t,i,o,l){var a;return a={callback:o.$compile(i,{no_return:!0,noBind:!0}),start:function(){return a.onDom(),a.stop=l.takeAttr("al-click-stop")},onDom:function(){return r.on(t,e,a.doCallback),o.$watch("$destroy",a.offDom)},offDom:function(){return r.off(t,e,a.doCallback)},doCallback:function(e){if(a.stop||(e.preventDefault(),e.stopPropagation()),!r.attr(t,"disabled")){try{a.callback(o)}catch(l){e=l,n.exceptionHandler(e,"al-click, error in expression: "+i,{name:i,scope:o,element:t})}return a.stop&&o.$eval(a.stop)&&(e.preventDefault(),e.stopPropagation()),o.$scan()}}}}}},t.click=e("click"),t.dblclick=e("dblclick"),t.submit=function(e,t,i){var o;return o={callback:i.$compile(t,{no_return:!0,noBind:!0}),start:function(){return o.onDom()},onDom:function(){return r.on(e,"submit",o.doCallback),i.$watch("$destroy",o.offDom)},offDom:function(){return r.off(e,"submit",o.doCallback)},doCallback:function(r){r.preventDefault(),r.stopPropagation();try{o.callback(i)}catch(l){r=l,n.exceptionHandler(r,"al-submit, error in expression: "+t,{name:t,scope:i,element:e})}return i.$scan()}}},t.controller={priority:500,restrict:"AE",init:function(e,t,r,i){var o;return o={owner:!0,start:function(){var t;return t=r.$new(),o.callController(t),n.applyBindings(t,e,{skip_attr:i.skippedAttr()})},callController:function(e){var r,i;return t?(i=t.split(" as "),r=n.getController(i[0],e),i[1]?e[i[1]]=new r(e):r(e)):void 0}}}},t.checked={priority:100,init:function(e,t,n){var i,o;return i=!1,o={changing:!1,start:function(){return o.onDom(),o.watchModel(),o.initDom()},onDom:function(){return r.on(e,"change",o.updateModel),n.$watch("$destroy",o.offDom)},offDom:function(){return r.off(e,"change",o.updateModel)},updateModel:function(){var i;return i=r.prop(e,"checked"),o.changing=!0,n.$setValue(t,i),n.$scan(function(){return o.changing=!1})},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=!!e.value},updateDom:function(t){return o.changing?void 0:r.prop(e,"checked",!!t)},initDom:function(){return o.updateDom(i)}}}},t.radio={priority:10,init:function(e,t,n,i){var o,l;return o=!1,l={changing:!1,start:function(){return l.makeValue(),l.onDom(),l.watchModel(),l.initDom()},makeValue:function(){var e,t;return e=i.takeAttr("al-value"),t=e?n.$eval(e):i.takeAttr("value"),l.value=t},onDom:function(){return r.on(e,"change",l.updateModel),n.$watch("$destroy",l.offDom)},offDom:function(){return r.off(e,"change",l.updateModel)},updateModel:function(){return l.changing=!0,n.$setValue(t,l.value),n.$scan(function(){return l.changing=!1})},watchModel:function(){var e;return e=n.$watch(t,l.updateDom,{readOnly:!0}),o=e.value},updateDom:function(t){return l.changing?void 0:r.prop(e,"checked",t===l.value)},initDom:function(){return l.updateDom(o)}}}},t["class"]=t.css={priority:30,init:function(e,t,i){var o;return o={start:function(){return o.parsLine(),o.prepare()},parsLine:function(){var r,l,a,s,u,c;for(o.list=u=[],c=t.split(","),a=0,s=c.length;s>a;a++)r=c[a],l=r.indexOf(":"),0>l?n.exceptionHandler(r,"al-css, error in expression: "+t,{exp:t,e:r,scope:i,element:e}):u.push({css:r.slice(0,+(l-1)+1||9e9).trim().split(" "),exp:r.slice(l+1).trim()});return null},prepare:function(){var e,t,n,r,l,a;for(l=o.list,n=0,r=l.length;r>n;n++)t=l[n],e=function(e){return function(t){return o.draw(e,t)}}(t),a=i.$watch(t.exp,e,{readOnly:!0,init:!0});return null},draw:function(t,n){var i,o,l,a,s,u,c,f,p;if(n){for(u=t.css,f=[],o=0,a=u.length;a>o;o++)i=u[o],f.push(r.addClass(e,i));return f}for(c=t.css,p=[],l=0,s=c.length;s>l;l++)i=c[l],p.push(r.removeClass(e,i));return p}}}},s=function(e){var t;return t={priority:700,init:function(t,n,i){var o;return o=i.$eval(n),!o===e?(r.remove(t),{owner:!0}):void 0}}},n.directives.bo["if"]=s(!0),n.directives.bo.ifnot=s(!1),t["if"]={priority:700,init:function(e,t,i,o){var l,a,s,u,c,f;return u=null,a=null,l=null,f=null,s=!1,c={direction:!0,owner:!0,start:function(){return c.prepare(),c.watchModel(),c.initUpdate()},prepare:function(){return l=e,f=r.createComment(" "+o.attrName+": "+t+" "),r.before(e,f),r.remove(e)},updateDom:function(e){if(!e===c.direction){if(!a)return;return a.$destroy(),c.removeDom(u),a=null,u=null}if(!a)return u=r.clone(l),c.insertDom(f,u),a=i.$new(),n.applyBindings(a,u,{skip_attr:o.skippedAttr()})},watchModel:function(){var e;return e=i.$watch(t,c.updateDom,{readOnly:!0}),s=!!e.value},initUpdate:function(){return c.updateDom(s)},removeDom:function(e){return r.remove(e)},insertDom:function(e,t){return r.after(e,t)}}}},t.ifnot={priority:700,init:function(){return t=n.directives.al["if"].init.apply(this,arguments),t.direction=!1,t}},t.show=function(e,t,n){var i,o;return i=!1,o={showDom:function(){return r.show(e)},hideDom:function(){return r.hide(e)},updateDom:function(e){return e?o.showDom():o.hideDom()},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=e.value},initDom:function(){return o.updateDom(i)},start:function(){return o.watchModel(),o.initDom()}}},t.hide=function(e,t,r,i){var o;return o=n.directives.al.show(e,t,r,i),o.updateDom=function(e){return e?o.hideDom():o.showDom()},o},t.app={priority:2e3,init:function(){return{owner:!0}}},t.stop={priority:-10,restrict:"AE",init:function(){return{owner:!0}}},t.init=function(e,t,r){var i,o;try{o=r.$compile(t,{no_return:!0,noBind:!0}),o(r)}catch(l){i=l,n.exceptionHandler(i,"al-init, error in expression: "+t,{exp:t,scope:r,element:e})}return r.$scan({late:!0})},t.include={priority:100,init:function(e,t,i,o){var l,a,s,u,c,f;return s=null,a=null,f=null,l=null,u=null,c={owner:!0,topElement:null,start:function(){return c.prepare(),c.watchModel(),c.initUpdate()},prepare:function(){return a=e,f=r.createComment(" "+o.attrName+": "+t+" "),r.before(e,f),r.remove(e)},loadHtml:function(e){return r.ajax(e)},removeBlock:function(){return s&&(s.$destroy(),s=null),l?(c.removeDom(l),l=null):void 0},insertBlock:function(e){return l=r.clone(a),r.html(l,e),c.insertDom(f,l),s=i.$new(),n.applyBindings(s,l,{skip_attr:o.skippedAttr()})},updateDom:function(e){return e?c.loadHtml({cache:!0,url:e,success:function(e){return c.removeBlock(),c.insertBlock(e)},error:c.removeBlock}):c.removeBlock()},removeDom:function(e){return r.remove(e)},insertDom:function(e,t){return r.after(e,t)},watchModel:function(){var e;return e=i.$watch(t,c.updateDom,{readOnly:!0}),u=e.value},initUpdate:function(){return c.updateDom(u)}}}},t.html={priority:100,init:function(e,t,i,o){var l,a,s;return l=null,s=function(t){return l&&(l.$destroy(),l=null),t?(r.html(e,t),l=i.$new(),n.applyBindings(l,e,{skip_attr:o.skippedAttr()})):void r.html(e,"")},a=i.$watch(t,s,{readOnly:!0}),s(a.value),{owner:!0}}},n.directives.bo["switch"]={priority:500,init:function(e,t,r,i){var o;return o=r.$new(),o.$switch={value:r.$eval(t),on:!1},n.applyBindings(o,e,{skip_attr:i.skippedAttr()}),{owner:!0}}},n.directives.bo.switchWhen={priority:500,init:function(e,t,n){return n.$switch.value!==t?(r.remove(e),{owner:!0}):n.$switch.on=!0}},n.directives.bo.switchDefault={priority:500,init:function(e,t,n){return n.$switch.on?(r.remove(e),{owner:!0}):null}},t.src=function(e,t,n){var i,o;return o=function(t){return t||(t=""),r.attr(e,"src",t)},i=n.$watchText(t,o,{readOnly:!0}),o(i.value)},n.directives.bo.src=function(e,t,n){var i;return i=n.$evalText(t),i?r.attr(e,"src",i):void 0},t.enable=function(e,t,n){var i,o;return i=function(t){return t?r.removeAttr(e,"disabled"):r.attr(e,"disabled","disabled")},o=n.$watch(t,i,{readOnly:!0}),i(o.value)},t.disable=function(e,t,n){var i,o;return i=function(t){return t?r.attr(e,"disabled","disabled"):r.removeAttr(e,"disabled")},o=n.$watch(t,i,{readOnly:!0}),i(o.value)},t.readonly=function(e,t,n){var i,o;return i=function(t){return r.prop(e,"readOnly",!!t)},o=n.$watch(t,i,{readOnly:!0}),i(o.value)},u=["keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","focus","blur","change"],i=function(e){return t[e]=function(t,i,o){var l;return l={start:function(){return l.makeCaller(),l.onDom()},makeCaller:function(){return l.caller=o.$compile(i,{no_return:!0,noBind:!0,input:["$event"]})},onDom:function(){return r.on(t,e,l.callback),o.$watch("$destroy",l.offDom)},offDom:function(){return r.off(t,e,l.callback)},callback:function(r){try{l.caller(o,r)}catch(a){r=a,n.exceptionHandler(r,e+", error in expression: "+i,{exp:i,scope:o,element:t})}return o.$scan()}}}},o=0,a=u.length;a>o;o++)l=u[o],i(l);t.cloak=function(e,t,n,i){return r.removeAttr(e,i.attrName),t?r.removeClass(e,t):void 0},t.focused=function(e,t,n){var i,o;return i=!1,o={changing:!1,updateModel:function(e){return o.changing?void 0:(o.changing=!0,n.$setValue(t,e),n.$scan(function(){return o.changing=!1}))},onDom:function(){var t,i;return i=function(){return o.updateModel(!0)},t=function(){return o.updateModel(!1)},r.on(e,"focus",i),r.on(e,"blur",t),n.$watch("$destroy",function(){return r.off(e,"focus",i),r.off(e,"blur",t)})},updateDom:function(t){return o.changing?void 0:(o.changing=!0,t?r.focus(e):r.blur(e),o.changing=!1)},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=e.value},initDom:function(){return o.updateDom(i)},start:function(){return o.onDom(),o.watchModel(),o.initDom()}}},t.style=function(e,t,n){var r,i;return r={},i=function(t){var n,i,o,a;for(l in r)a=r[l],e.style[l]="";r={},i=t||{},o=[];for(n in i)a=i[n],l=n.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),r[l]=a,o.push(e.style[l]=a||"");return o},n.$watch(t,i,{deep:!0,init:!0})}}.call(this),function(){n.directives.al.repeat={priority:1e3,init:function(e,t,i,o){var l;return l={owner:!0,start:function(){return l.prepare(),l.parsExpression(),l.prepareDom(),l.watchModel(),l.initUpdateDom()},prepare:function(){var e,t;return t=o.takeAttr("al-controller"),t?(e=n.directives.al.controller.init(null,t,null),l.childController=e.callController):l.childController=null},parsExpression:function(){var e,n;if(n=t,e=n.match(/(.*) store to ([\w\.]+)/),e&&(l.storeTo=e[2],n=e[1]),e=n.match(/(.*) track by ([\w\.\$\(\)]+)/),e&&(l.trackExpression=e[2],n=e[1]),e=n.match(/\s*(\w+)\s+in\s+(.+)/),!e)throw"Wrong repeat: "+t;return l.nameOfKey=e[1],l.expression=e[2]},watchModel:function(){return l.watch=i.$watch(l.expression,l.updateDom,{isArray:!0,readOnly:!l.storeTo})},initUpdateDom:function(){return l.updateDom(l.watch.value)},prepareDom:function(){return l.base_element=e,l.top_element=r.createComment(" "+t+" "),r.before(e,l.top_element),r.remove(e)},makeChild:function(e,t,n){var r;return r=i.$new(),l.updateChild(r,e,t,n),l.childController&&l.childController(r),r},updateChild:function(e,t,n,r){return e[l.nameOfKey]=t,e.$index=n,e.$first=0===n,e.$last=n===r.length-1},rawUpdateDom:function(e,t){var n,i,o,l,a,s;for(i=0,a=e.length;a>i;i++)n=e[i],r.remove(n);for(l=0,s=t.length;s>l;l++)o=t[l],r.after(o.after,o.element);return null},updateDom:function(){var t,a,s,u,c,f;return f=[],a=null,c=null,u=null,s=null,t=0,function(p){var d,h,v,m,g,$,b,y,w,x,k,D,_,O,A,S,C,T,L,M,B,E,j,N;for(u||("$index"===l.trackExpression?(a={},u=function(){var e;return e=t,a[e]||null},s=function(e){var t;return t=e.$id,t&&delete a[t],null},c=function(e,n){var r;return r=t,n.$id=r,a[r]=n,null}):l.trackExpression?(a={},d=i.$compile(l.trackExpression,{input:["$id",l.nameOfKey]}),h=function(e){var t;return(t=e.$alite_id)?t:t=e.$alite_id=n.utilits.getId()},u=function(e){var t;return t=d(h,e),t?a[t]:null},s=function(e){var t;return t=e.$id,t&&delete a[t],null},c=function(e,t){var n;return n=d(h,e),t.$id=n,a[n]=t,null}):window.Map?(a=new Map,u=function(e){return a.get(e)},s=function(e){return a["delete"](e.item),null},c=function(e,t){return a.set(e,t),null}):(a={},u=function(e){var t;return t=e.$alite_id,t?a[t]:null},s=function(e){var t;return t=e.$id,t&&delete a[t],null},c=function(e,t){var r;return r=n.utilits.getId(),e.$alite_id=r,t.$id=r,a[r]=t,null})),p&&p.length||(p=[]),l.storeTo&&(i.$setValue(l.storeTo,p),i.$scan({late:!0})),O=l.top_element,g=[],B=[],b=0,A=f.length;A>b;b++)M=f[b],M.active=!1;for(t=k=0,S=p.length;S>k;t=++k)w=p[t],M=u(w),M&&(M.active=!0);for($=function(){var e,t,n;for(n=[],e=0,t=f.length;t>e;e++)M=f[e],M.active||(M.prev&&(M.prev.next=M.next),M.next&&(M.next.prev=M.prev),s(M),M.scope.$destroy(),n.push(M.element));return n}(),v=[],E=null,j=null,t=D=0,C=p.length;C>D;t=++D)if(w=p[t],x=w,w=w||{},M=u(w)){if(l.updateChild(M.scope,w,t,p),M.prev===j){j=M,O=M.element,M.active=!0,B.push(M);continue}M.prev=j,j&&(j.next=M),g.push({element:M.element,after:j?j.element:l.top_element}),O=M.element,j=M,M.active=!0,B.push(M)}else m=l.makeChild(x,t,p),e=r.clone(l.base_element),v.push([m,e]),g.push({element:e,after:O}),M={scope:m,element:e,prev:j,next:null,active:!0,item:w},c(w,M),j?(L=j.next,j.next=M,M.next=L,L&&(L.prev=M)):0===t&&f[0]&&(L=f[0],M.next=L,L.prev=M),j=M,O=e,B.push(M);for(f=B,l.rawUpdateDom($,g),N=o.skippedAttr(),_=0,T=v.length;T>_;_++)y=v[_],n.applyBindings(y[0],y[1],{skip_attr:N});return null}}()}}},n.directives.bo.repeat={priority:1e3,init:function(e,t,r,i){var o;return o=n.directives.al.repeat.init(e,t,r,i),o.start=function(){return o.prepare(),o.parsExpression(),o.prepareDom(),o.watch={value:r.$eval(o.expression)},o.initUpdateDom()},o}}}.call(this),function(){var e,t,r;n.filters.filter=function(e,t){var n;return n=t.$compile(e),function(e){var t,r,i,o,l,a,s;if(r=n(),!r)return e;if("string"==typeof r)r={$:r};else if("object"!=typeof r)return e;return a=function(){var n,a,u;for(u=[],n=0,a=e.length;a>n;n++)if(l=e[n],"object"==typeof l){if(i=!0,r.$){i=!1,t=r.$.toLowerCase();for(o in l)if(s=l[o],"$alite_id"!==o&&(""+s).toLowerCase().indexOf(t)>=0){i=!0;break}if(!i)continue}i=!0;for(o in r)if(s=r[o],t=l[o],t&&(""+t).toLowerCase().indexOf((""+s).toLowerCase())<0){i=!1;break}if(!i)continue;u.push(l)}else{if(!r.$)continue;if(t=r.$.toLowerCase(),(""+l).toLowerCase().indexOf(t)<0)continue;u.push(l)}return u}()}},n.filters.slice=function(e,t){var n;return n=t.$compile("["+e+"]"),function(e){return[].slice.apply(e,n())}},e=function(e){return 10>e?"0"+e:""+e},t=function(t,n){var r,i,o,l,a;if(!n)return"";for(a=[[/yyyy/g,n.getFullYear()],[/mm/g,e(n.getMonth()+1)],[/dd/g,e(n.getDate())],[/HH/g,e(n.getHours())],[/MM/g,e(n.getMinutes())],[/SS/g,e(n.getSeconds())]],l=t,i=0,o=a.length;o>i;i++)r=a[i],l=l.replace(r[0],r[1]);return l},n.filters.date=function(e){return function(n){return t(e,n)}},n.filters.generator=function(){var e;return e=[],function(t){if(e.length>=t)e.length=t;else for(;e.length<t;)e.push({});return e}},r=function(e){return JSON.stringify(n.utilits.clone(e),null,4)},n.filters.json=function(){return r}}.call(this),function(){var e,t,i,o,l,a,s,u;n.observer=s={},u={$system:!0,$parent:!0,$ns:!0,$$scope:!0,$$path:!0,$$isArray:!0,$$observer:!0,$$cbs:!0},a=function(e){return r.isObject(e)?!0:r.isArray(e)},s.watch=function(e,n,r){var i,o,l,a,s;for(s=e.wtree,a=n.split("."),i=0,l=a.length;l>i;i++)o=a[i],s[o]||(s[o]={$$cbs:[]}),s=s[o],s.$$cbs.push(r);return t(e,n),r},t=function(e,t){var n,i,o,l,s,u,c;for(u=e.scope,c=e.tree,o=t.split("."),s="",n=0,l=o.length;l>n;){if(i=o[n++],l===n){if(!r.isArray(u[i]))break}else if(!a(u[i]))break;c[i]||(c[i]={}),c=c[i],s?s+="."+i:s=i,u=u[i],u.$$observer||(u.$$observer={}),c.$$scope||(c.$$scope=u,c.$$path=s,u.$$observer[e.key]=c,r.isArray(u)?(c.$$isArray=!0,Array.observe(u,e.handler)):Object.observe(u,e.handler))}return null},i=function(e,t){var n,r,i,l,a;for(a=e.wtree,l=t.split("."),n=0,i=l.length;i>n&&(r=l[n],a=a[r],a);n++);return a?o(e,a,t):void 0},o=function(e,n,r){var i,l;l=!1;for(i in n)u[i]||o(e,n[i],r+"."+i)&&(l=!0);return!l&&n.$$cbs.length?(t(e,r),!0):!1},s.unwatch=function(e,t,n){var r,i,o,l,a,s,u;for(u=e.wtree,s=t.split("."),o=0,a=s.length;a>o;o++)l=s[o],r=u[l],r&&(i=r.$$cbs.indexOf(n),i>=0&&r.$$cbs.splice(i,1),u=r);return null},l=function(e,t,n){var r,i,o,l,a,s,u,c,f;for(f=e,u=t.split("."),i=0,a=u.length;a>i;i++)o=u[i],f=f[o]||{};if(f.$$cbs)for(c=f.$$cbs,l=0,s=c.length;s>l;l++)(r=c[l])(n);return null},e=function(t,n,i){var o,l,a;i&&i!==n.$$scope&&console.error("Observe: fake scope"),l=n.$$scope,r.isArray(n.$$scope)?(n.$$isArray=null,Array.unobserve(n.$$scope,t.handler)):Object.unobserve(n.$$scope,t.handler),n.$$scope.$$observer[t.key]=null,n.$$scope=null,n.$$path=null;for(o in n)a=n[o],u[o]||r.isObject(a)&&e(t,n[o]);return null},s.observe=function(t,r){var o;return r=r||{},o={key:n.utilits.getId(),scope:t,tree:{},wtree:{},path:"",rootEvent:r.rootEvent,active:!r.noActive,handler:function(t){var n,r,s,c,f,p,d,h;for(r=0,f=t.length;f>r;r++)if(n=t[r],p=n.object,p.$$observer)if(d=p.$$observer[o.key],d.$$isArray)l(o.wtree,d.$$path,null);else{if(s=n.name,u[s])continue;h=p[s],c=d.$$path?d.$$path+"."+s:s,"add"===n.type?(a(h)&&i(o,c),l(o.wtree,c,h)):"update"===n.type?(d[s]&&a(n.oldValue)&&e(o,d[s],n.oldValue),a(h)&&i(o,c),l(o.wtree,c,null)):"delete"===n.type&&(a(n.oldValue)&&e(o,d[s],n.oldValue),l(o.wtree,c,null)),d===o.tree&&o.rootEvent(c,h)}return null}},function(e,t){return e.$$observer||(e.$$observer={}),t=o.tree,t.$$scope?void 0:(t.$$scope=e,t.$$path="",e.$$observer[o.key]=t,Object.observe(e,o.handler))}(o.scope,o.tree),o},s.unobserve=function(t){return e(t,t.tree,t.scope),t.scope=null,t.tree=null,t.wtree=null,t.rootEvent=null,null},s.reobserve=function(t,n){return t.tree[n]&&e(t,t.tree[n]),a(t.scope[n])?i(t,n):void 0},s.fire=function(e,t){return l(e.wtree,t,null)},s.deliver=function(e){return Object.deliverChangeRecords(e.handler)}}.call(this),n}if("function"==typeof define)define(function(){var t=e();return t.makeInstance=e,t});else if("object"==typeof module&&"object"==typeof module.exports){var t=e();t.makeInstance=e,module.exports=t}else if("function"==typeof alightInitCallback)alightInitCallback(e);else{var t=e({globalControllers:!0});window.alight=t,window.f$=t.f$,f$.ready(t.bootstrap)}}();