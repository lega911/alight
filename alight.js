/**
 * Angular Light
 * (c) 2015 Oleg Nechaev
 * Released under the MIT License.
 */
!function(){function e(e){e=e||{};var t=e.globalControllers,n={},r={};return n.f$=r,function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,r,i=t?t:0;if(!this)throw new TypeError;if(r=this.length,0===r||i>=r)return-1;for(0>i&&(i=r-Math.abs(i)),n=i;r>n;n++)if(this[n]===e)return n;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof String.prototype.trimLeft&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}),r.browser=function(){var e,t=navigator.appName,n=navigator.userAgent.toLowerCase(),r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(r[2]=e[1]),r=r?[r[1],r[2]]:[t,navigator.appVersion,"-?"],{name:r[0],version_string:r[1],version:Number(r[1].match(/\d+/))}}();var e=!1,t=!1,n=!1,i=window.$;if(r.__jquery?(n=5,i=r.__jquery):(("chrome"===r.browser.name||"safari"===r.browser.name)&&(e=!0),"firefox"===r.browser.name&&(t=r.browser.version),"msie"===r.browser.name&&(n=r.browser.version)),r.text=n&&8>n?function(e,t){i(e).text(t)}:function(e,t){return 2!==arguments.length?e.textContent||e.innerText:void(void 0!==e.textContent?e.textContent=t:e.innerText=t)},r.html=n&&6>n?function(e,t){return 2!==arguments.length?i(e).html():void i(e).html(t)}:function(e,t){return 2!==arguments.length?e.innerHTML:void(e.innerHTML=t)},r.createComment=function(e){return document.createComment(e)},r.before=function(e,t){var n=e.parentNode;n.insertBefore(t,e)},r.after=function(e,t){var n=e.parentNode,r=e.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)},r.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},n&&9>n?r.on=function(e,t,n){i(e).on(t,n)}:(r.on=function(e,t,n){e.addEventListener(t,n,!1)},r.off=function(e,t,n){e.removeEventListener(t,n,!1)}),r.clone=function(e){return e.cloneNode(!0)},r.find=n&&8>n?function(e,t){return i(e).find(t)}:function(e,t){return e.querySelectorAll(t)},n&&8>n?(r.attr=function(e,t,n){return i(e).attr(t,n)},r.removeAttr=function(e,t){i(e).removeAttr(t)}):(r.attr=function(e,t,n){return 2===arguments.length?e.getAttribute(t):void e.setAttribute(t,n)},r.removeAttr=function(e,t){e.removeAttribute(t)}),r.isFunction=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},r.isObject=function(e){var t={};return e&&"[object Object]"===t.toString.call(e)},r.isArray=function(e){return e instanceof Array},r.val=n&&6>n?function(e,t){return 1===arguments.length?i(e).val():void i(e).val(t)}:function(e,t){return 1===arguments.length?e.value:void(e.value=t)},r.prop=n&&6>n?function(e,t,n){return 2===arguments.length?i(e).prop(t):void i(e).prop(t,n)}:function(e,t,n){return 2===arguments.length?e[t]:void(e[t]=n)},n&&8>n?(r.addClass=function(e,t){i(e).addClass(t)},r.removeClass=function(e,t){i(e).removeClass(t)}):(r.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},r.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")}),n&&8>n?(r.show=function(e){i(e).show()},r.hide=function(e){i(e).hide()}):(r.show=function(e){r.removeClass(e,"al-hide")},r.hide=function(e){r.addClass(e,"al-hide")}),r.children=n&&9>n||t&&4>t?function(e){return i(e).children()}:function(e){return e.children},r.childNodes=function(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)t.push(n[r]);return t},r.getAttributes=n&&8>n?function(e){var t={},n=i(e);return n.length&&i.each(n.get(0).attributes,function(e,r){var r=r.nodeName||r.name;e=n.attr(r),void 0!=e&&e!==!1&&(t[r]=e)}),t}:function(e){for(var t,n={},r=e.attributes,i=0,o=r.length;o>i;i++)t=r.item(i),n[t.nodeName]=t.value;return n},r.ready=n&&9>n?function(e){i(e)}:function(){function e(){n=!0,r.off(document,"DOMContentLoaded",e);for(var i=0;i<t.length;i++)t[i]();t.length=0}var t=[],n=!1;return r.on(document,"DOMContentLoaded",e),function(e){n?e():t.push(e)}}(),n&&9>n)var o=function(){},s=function(e){i.ajax({url:e.url,type:e.type||"GET"}).then(e.success||o,e.error||o)};else var s=function(e){var t=new XMLHttpRequest;t.open(e.type||"GET",e.url,!0),t.send(),e.success&&(t.onload=function(){t.status>=200&&t.status<400?e.success(t.responseText):e.error&&e.error()}),e.error&&(t.onerror=e.error)};r.ajaxCache={},r.ajax=function(e){if(!e.cache)return s(e);var t=e.type||"GET",n=t+":"+e.url,i=r.ajaxCache[n];return i||(r.ajaxCache[n]=i={callback:[]}),i.result?void(e.success&&e.success(i.result)):(i.callback.push(e),void(i.loading||(i.loading=!0,s({type:t,url:e.url,success:function(e){i.result=e;for(var t=0;t<i.callback.length;t++)i.callback[t].success&&i.callback[t].success(e);i.callback.length=0},error:function(){for(var e=0;e<i.callback.length;e++)i.callback[e].error&&i.callback[e].error();i.callback.length=0}}))))},n&&8>n?(r.focus=function(e){i(e).focus()},r.blur=function(e){i(e).blur()}):(r.focus=function(e){e.focus()},r.blur=function(e){e.blur()}),function(){var e='@charset "UTF-8";[al-cloak],.al-hide{display:none !important;}',t=r.find(document,"head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}()}(),function(){var e,i,o,s,l,a,u,c,f,p,d,h,v;n.version="0.8.4",n.debug={useObserver:!1,observer:0,scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},n.scopes=[],n.controllers={},n.filters={},n.utilits={},n.directives={al:{},bo:{},ctrl:{}},n.text={},n.apps={},n.directivePreprocessor=s=function(e,t,i){var o,l,a,u;if(t=t.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),a=i.scope.$ns?i.scope.$ns.directives[e][t]:n.directives[e][t],!a)return{noDirective:!0};if(o={},r.isFunction(a))o.init=a;else{if(!r.isObject(a))throw"Wrong directive: "+e+"."+t;for(l in a)u=a[l],o[l]=u}if(o.priority=a.priority||0,o.restrict=a.restrict||"A",o.restrict.indexOf(i.attr_type)<0)throw"Directive has wrong binding (attribute/element): "+t;return o.$init=function(n,r,l,a){var u,c;return u=function(){var e,t,n,r,i;for(n=c.procLine,t=r=0,i=n.length;i>r;t=++r)if(e=n[t],e.fn.call(c),c.isDeferred){c.procLine=n.slice(t+1);break}return null},c={element:n,expression:r,scope:l,env:a,ns:e,name:t,args:i,directive:o,result:{},isDeferred:!1,procLine:s.ext,makeDeferred:function(){return c.isDeferred=!0,c.result.owner=!0,c.directive.scope=!0,function(){return c.isDeferred=!1,u()}}},u(),c.result},o},function(){var e;return s.ext=e=[],e.push({code:"init",fn:function(){return this.directive.init&&(this.result=this.directive.init(this.element,this.expression,this.scope,this.env)||{}),r.isObject(this.result)?void 0:this.result={}}}),e.push({code:"templateUrl",fn:function(){var e,t;return t=this,this.directive.templateUrl?(e=this.makeDeferred(),r.ajax({cache:!0,url:this.directive.templateUrl,success:function(n){return t.directive.template=n,e()},error:e})):void 0}}),e.push({code:"template",fn:function(){var e;if(this.directive.template){if(1===this.element.nodeType)return r.html(this.element,this.directive.template);if(8===this.element.nodeType&&(e=document.createElement("p"),e.innerHTML=this.directive.template.trimLeft(),e=e.firstChild,r.after(this.element,e),this.element=e,!this.directive.scope))return this.directive.scope=!0}}}),e.push({code:"scope",fn:function(){var e;return this.directive.scope?(e=this.scope,this.scope=e.$new("isolate"===this.directive.scope),this.result.owner=!0,this.doBinding=!0):void 0}}),e.push({code:"link",fn:function(){return this.directive.link?this.directive.link(this.element,this.expression,this.scope,this.env):void 0}}),e.push({code:"scopeBinding",fn:function(){return this.doBinding?n.applyBindings(this.scope,this.element,{skip_attr:this.env.skippedAttr()}):void 0}})}(),h=function(){var e;return e=function(e,t,n){var r;return"A"===t.attr_type?(r=n||{},r.priority=-5,r.is_attr=!0,r.name=e,r.attrName=e,r.element=t.element,t.list.push(r)):void 0},function(t,r){var i,o,s,l,a,u;return r.skip_attr.indexOf(t)>=0?e(t,r,{skip:!0}):(o=t.indexOf("-"),0>o?e(t,r):(l=t.substring(0,o),s=t.substring(o+1),u=r.scope,(a=u.$ns?(u.$ns.directives||{})[l]:n.directives[l])?(i=n.directivePreprocessor(l,s,r),i.noDirective?e(t,r,{noDirective:!0}):r.list.push({name:s,directive:i,priority:i.priority,attrName:t})):e(t,r)))}}(),d=function(e,t){return e.priority===t.priority?0:e.priority>t.priority?-1:1},i=function(e,t,i,o){var s,l,a;return l=t,l.indexOf(n.utilits.pars_start_tag)<0?void 0:(s=function(t){return r.attr(e,o,t)},a=i.$watchText(l,s,{readOnly:!0}),s(a.value))},v=function(e,t){var r,i,o;return i=t.data,i.indexOf(n.utilits.pars_start_tag)<0?void 0:(r=function(e){return t.nodeValue=e},o=e.$watchText(i,r,{readOnly:!0}),r(o.value))},o=function(e,t){var r,i,o,s,l,a,u,c,f,p,d;if(p=t.nodeValue.trimLeft(),"directive:"===p.slice(0,10)){if(p=p.slice(10).trimLeft(),u=p.indexOf(" "),u>=0?(o=p.slice(0,+(u-1)+1||9e9),d=p.slice(u+1)):(o=p,d=""),r={list:c=[],element:t,attr_type:"M",scope:e,skip_attr:[]},h(o,r),i=c[0],i.noDirective)throw"Directive not found: "+i.name;s=i.directive,a={element:t,attrName:o,attributes:[],skippedAttr:function(){return[]}},n.debug.directive&&console.log("bind",i.attrName,d,i);try{if(f=s.$init(t,d,e,a),f&&f.start)return f.start()}catch(v){return l=v,n.exceptionHandler(l,"Error in directive: "+i.name,{value:d,env:a,scope:e,element:t})}}},c=function(){var e,t;return t=function(e,t){var n,i,o,s,l;for(1===arguments.length&&(t=!0),l=this.attributes,o=0,s=l.length;s>o;o++)if(n=l[o],n.attrName===e)return t&&(n.skip=!0),i=r.attr(this.element,e),i||!0},e=function(){var e,t,n,r,i;for(r=this.attributes,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.skip&&i.push(e.attrName);return i},function(o,s,l){var u,c,f,p,v,m,$,g,y,b,w,x,k,_,D,O,A,L,C,T;if(l=l||{},_=!1,k=l.skip_attr||[],k instanceof Array||(k=[k]),!l.skip_top){u={list:b=[],element:s,skip_attr:k,attr_type:"E",scope:o},c=s.nodeName.toLowerCase(),h(c,u),u.attr_type="A",p=r.getAttributes(s);for(c in p)f=p[c],h(c,u);for(b=b.sort(d),O=0,L=b.length;L>O;O++)if(v=b[O],!v.skip){if(v.noDirective)throw"Directive not found: "+v.name;if(v.skip=!0,D=r.attr(s,v.attrName),v.is_attr)i(s,D,o,v.attrName);else{m=v.directive,g={element:s,attrName:v.attrName,attributes:b,takeAttr:t,skippedAttr:e},n.debug.directive&&console.log("bind",v.attrName,D,v);try{x=m.$init(s,D,o,g),x&&x.start&&x.start()}catch(S){$=S,n.exceptionHandler($,"Error in directive: "+v.attrName,{value:D,env:g,scope:o,element:s})}if(x&&x.owner){_=!0;break}}}}if(!_)for(T=r.childNodes(s),A=0,C=T.length;C>A;A++)w=T[A],w&&(y=a[w.nodeType],y&&y(o,w));return null}}(),a={1:c,3:v,8:o},e=function(t){if(this instanceof e)return this;t=t||{};var r;if(t.prototype){var i=function(){};i.prototype=t.prototype;var o=new i,s=e.prototype;for(var l in s)s.hasOwnProperty(l)&&(o[l]=s[l]);var a=function(){};a.prototype=o,r=new a}else r=new e;return r.$system={watches:{},watchList:[],watch_any:[],root:r,children:[],scan_callbacks:[],destroy_callbacks:[],finishBinding_callbacks:[],finishBinding_lock:!1},r.$system.useObserver="boolean"==typeof t.useObserver?t.useObserver:n.debug.useObserver,r.$system.useObserver&&(r.$system.useObserver=!!Object.observe),r.$system.useObserver&&(r.$system.obList=[],r.$system.obFire=[],r.$system.ob=n.observer.observe(r,{rootEvent:function(e,t){var i,o,s,l;for(n.debug.observer&&console.warn("Reobserve",e),l=r.$system.children,o=0,s=l.length;s>o;o++)i=l[o],i.$$rebuildObserve(e,t);return null}})),r},n.Scope=e,e.prototype.$$rebuildObserve=function(e,t){var r,i,o,s,l;for(i=this,n.observer.reobserve(i.$system.ob,e),l=i.$system.children,o=0,s=l.length;s>o;o++)r=l[o],r.$$rebuildObserve(e,t);return n.observer.fire(i.$system.ob,e,t)},e.prototype.$new=function(e){var t,r;return r=this,e?t=n.Scope():(r.$system.ChildScope||(r.$system.ChildScope=function(){var e;return this.$system={watches:{},watchList:[],watch_any:[],root:r.$system.root,children:[],destroy_callbacks:[]},this.$parent=null,r.$system.root.$system.useObserver&&(e=this,this.$system.obList=[],this.$system.obFire=[],this.$system.ob=n.observer.observe(this,{rootEvent:function(t,r){var i,o,s,l;for(n.debug.observer&&console.warn("Reobserve",t),l=e.$system.children,o=0,s=l.length;s>o;o++)i=l[o],i.$$rebuildObserve(t,r);return null}})),this},r.$system.ChildScope.prototype=r),t=new r.$system.ChildScope),t.$parent=r,r.$system.children.push(t),t},e.prototype.$watch=function(e,t,i){var o,s,l,a,u,c,f,p,d,h,v,m,$,g,y,b;if(v=this,i===!0?i={isArray:!0}:i||(i={}),i.is_array&&(i.isArray=!0),r.isFunction(e))l=e,c=n.utilits.getId(),a=!0;else{if(a=!1,l=null,e=e.trim(),"::"===e.slice(0,2)&&(e=e.slice(2),i.oneTime=!0),c=e,"$any"===c)return v.$system.watch_any.push(t);if("$destroy"===c)return v.$system.destroy_callbacks.push(t);if("$finishBinding"===c)return v.$system.root.$system.finishBinding_callbacks.push(t);c=i.deep?"d#"+c:i.isArray?"a#"+c:"v#"+c}if(n.debug.watch&&console.log("$watch",e),s=v.$system.watches[c])i.readOnly||(s.extraLoop=!0),h=s.value;else{if(a||(o=v.$compile(e,{noBind:!0,full:!0}),l=o.fn),h=m=l(v),i.deep&&(m=n.utilits.clone(m),i.isArray=!1),v.$system.watches[c]=s={isArray:Boolean(i.isArray),extraLoop:!i.readOnly,deep:i.deep,value:m,callbacks:[],exp:l,src:""+e},u=!1,v.$system.root.$system.useObserver&&!a&&!i.oneTime&&!i.deep&&o.isSimple&&o.simpleVariables.length&&(u=!0,s.isArray?s.value=null:o.isSimple<2&&(u=!1),u))for(s.isObserved=!0,b=o.simpleVariables,g=0,y=b.length;y>g;g++)$=b[g],f=n.observer.watch(this.$system.ob,$,function(){return v.$system.obFire[c]?void 0:(v.$system.obFire[c]=!0,v.$system.obList.push(s))});i.isArray&&!u&&(s.value=r.isArray(m)?m.slice():null,h=s.value),u||v.$system.watchList.push(s)}return p={$:s,value:h},i.oneTime&&(d=t,t=function(e){return void 0!==e?(p.stop(),d(e)):void 0}),s.callbacks.push(t),p.stop=function(){var e;if(e=s.callbacks.indexOf(t),e>=0){if(s.callbacks.splice(e,1),0!==s.callbacks.length)return;if(delete v.$system.watches[c],e=v.$system.watchList.indexOf(s),e>=0)return v.$system.watchList.splice(e,1)}},i.init&&t(p.value),p},function(){return e.prototype.$compile=function(e,t){var r,i,o,s,l,a,u;return t=t||{},u=this,a={},e=e.trim(),"::"===e.slice(0,2)&&(e=e.slice(2),a.oneTime=!0),t.stringOrOneTime&&(t.string=!a.oneTime),l=e+"#",l+=t.no_return?"+":"-",l+=t.string?"s":"v",t.input&&(l+=t.input.join(",")),r=n.utilits.compile.expression(e,{scope:u,hash:l,no_return:t.no_return,string:t.string,input:t.input,rawExpression:t.rawExpression}),s=r.fn,o=r.filters,a.rawExpression=r.rawExpression,a.isSimple=r.isSimple,a.simpleVariables=r.simpleVariables,o&&o.length&&(s=n.utilits.filterBuilder(u,s,o),t.string&&(i=s,s=function(){var e=i.apply(this,arguments);return""+(e||(null==e?"":e))})),a.fn=t.noBind?s:(t.input||[]).length<4?function(){var r;try{return s(u,arguments[0],arguments[1],arguments[2])}catch(i){return r=i,n.exceptionHandler(r,"Wrong in expression: "+e,{src:e,cfg:t})}}:function(){var r,i,o,l,a;try{for(r=[u],l=0,a=arguments.length;a>l;l++)o=arguments[l],r.push(o);return s.apply(null,r)}catch(c){return i=c,n.exceptionHandler(i,"Wrong in expression: "+e,{src:e,cfg:t})}},t.full?a:a.fn}}(),e.prototype.$eval=function(e){return this.$compile(e,{noBind:!0})(this)},e.prototype.$getValue=function(e){var t,n,r,i,o;for(t=this,o=e.split("."),r=0,i=o.length;i>r;r++)n=o[r],t=(t||{})[n];return t},e.prototype.$setValue=function(e,t){var n,r,i,o,s,l,a;for(i=this,r=e.split("."),o=l=0,a=r.length-2;a>=l;o=l+=1)s=r[o],n=i[s],void 0===n&&(i[s]=n={}),i=n;return s=r[r.length-1],i[s]=t},e.prototype.$destroy=function(){var e,t,r,i,o,s,l,a,u,c;for(i=this,u=i.$system.destroy_callbacks,o=0,l=u.length;l>o;o++)(e=u[o])(i);for(i.$system.destroy_callbacks=[],i.$system.root.$system.useObserver&&n.observer.unobserve(i.$system.ob),c=i.$system.children.slice(),s=0,a=c.length;a>s;s++)r=c[s],r.$destroy();return i.$parent&&(t=i.$parent.$system.children.indexOf(i),i.$parent.$system.children.splice(t,1)),i.$parent=null,i.$system.watches={},i.$system.watchList=[],i.$system.watch_any.length=0},l=function(){return window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()}}(),u=function(e,t){var n,r,i,o,s,l;if(null===e||null===t)return!0;if(r=typeof e,i=typeof t,r!==i)return!0;if("object"===r){if(e.length!==t.length)return!0;for(n=s=0,l=e.length;l>s;n=++s)if(o=e[n],o!==t[n])return!0}return!1},f=function(e,t){var i,o,s,l,a,c,f,p,d,h,v,m,$,g,y,b,w,x,k,_,D,O;for(c=!1,a=0,g=0,s=[],d=[],v=[e];v;){for(m=v[0],f=1;m;){for($=m.$system,g+=$.watchList.length,D=$.watchList,w=0,k=D.length;k>w;w++)if(b=D[w],t.src=b.src,p=b.value,y=b.exp(m),p!==y){if(h=!1,b.isArray?(i=r.isArray(p),o=r.isArray(y),i===o?i&&u(p,y)&&(b.value=y.slice(),h=!0):(h=!0,b.value=o?y.slice():null)):b.deep?n.utilits.equal(p,y)||(h=!0,b.value=n.utilits.clone(y)):(h=!0,b.value=y),h)for(h=!1,a++,b.extraLoop&&(c=!0),O=b.callbacks.slice(),x=0,_=O.length;_>x;x++)l=O[x],l.call(m,y);n.debug.scan>1&&console.log("changed:",b.src)}$.children.length&&d.push($.children),$.watch_any.length&&s.push.apply(s,$.watch_any),m=v[f++]}v=d.shift()}return t.total=g,t.obTotal=0,t.changes=a,t.extraLoop=c,t.anyList=s},p=function(e,t){var i,o,s,l,a,c,f,p,d,h,v,m,$,g,y,b,w,x,k,_,D,O,A,L,C,T,S,M,B;for(c=!1,a=0,y=0,v=0,s=[],d=[],m=[e];m;){for($=m[0],f=1;$;){for(g=$.$system,n.observer.deliver(g.ob),T=g.obList,x=0,O=T.length;O>x;x++)if(w=T[x],t.src=w.src,p=w.value,b=w.exp($),p!==b)for(w.isArray||(w.value=b),a++,w.extraLoop&&(c=!0),S=w.callbacks.slice(),k=0,A=S.length;A>k;k++)l=S[k],l.call($,b);for(v+=g.obList.length,g.obList.length=0,g.obFire={},y+=g.watchList.length,M=g.watchList,_=0,L=M.length;L>_;_++)if(w=M[_],t.src=w.src,p=w.value,b=w.exp($),p!==b){if(h=!1,w.isArray?(i=r.isArray(p),o=r.isArray(b),i===o?i&&u(p,b)&&(w.value=b.slice(),h=!0):(h=!0,w.value=o?b.slice():null)):w.deep?n.utilits.equal(p,b)||(h=!0,w.value=n.utilits.clone(b)):(h=!0,w.value=b),h)for(h=!1,a++,w.extraLoop&&(c=!0),B=w.callbacks.slice(),D=0,C=B.length;C>D;D++)l=B[D],l.call($,b);n.debug.scan>1&&console.log("changed:",w.src)}g.children.length&&d.push(g.children),g.watch_any.length&&s.push.apply(s,g.watch_any),$=m[f++]}m=d.shift()}return t.total=y,t.obTotal=v,t.changes=a,t.extraLoop=c,t.anyList=s},e.prototype.$scanAsync=function(e){return this.$scan({late:!0,callback:e})},e.prototype.$scan=function(e){var t,i,o,s,a,u,c,d,h,v,m,$,g,y,b;if(e=e||{},r.isFunction(e)&&(e={callback:e}),c=this.$system.root,v=e.top||c,e.callback&&c.$system.scan_callbacks.push(e.callback),e.late){if(v!==c)throw"conflict: late and top";if(c.$system.lateScan)return;return c.$system.lateScan=!0,void n.nextTick(function(){return c.$system.lateScan?c.$scan():void 0})}if("scaning"===c.$system.status)return void(c.$system.extraLoop=!0);c.$system.lateScan=!1,c.$system.status="scaning",d=c.$system.scan_callbacks.slice(),c.$system.scan_callbacks.length=0,n.debug.scan&&(h=l()),a=10;try{for(;a;){if(a--,c.$system.extraLoop=!1,u={},c.$system.useObserver?p(v,u):f(v,u),u.changes)for(b=u.anyList,m=0,g=b.length;g>m;m++)(i=b[m])();if(!u.extraLoop&&!c.$system.extraLoop)break}n.debug.scan&&(o=l()-h,console.log("$scan: ("+(10-a)+") "+u.total+" + "+u.obTotal+" / "+o+"ms"))}catch(w){s=w,n.exceptionHandler(s,"$scan, error in expression: "+u.src,{src:u.src,result:u})}finally{for(c.$system.status=null,$=0,y=d.length;y>$;$++)t=d[$],t.call(c)}if(0===a)throw"Infinity loop detected"},function(){var t;return t=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)if(t=e[n],"expression"===t.type&&!t["static"])return!1;return!0},e.prototype.$compileText=function(e,r){var i,o,s,l,a,u,c,f,p,d,h,v;if(c=this,r=r||{},p=n.utilits.compile.buildSimpleText(e,null))return u=r.fullResponse?{type:"fn",fn:p.fn,isSimple:p.isSimple,simpleVariables:p.simpleVariables}:p.fn;if(e.indexOf(n.utilits.pars_start_tag)<0)return u=r.result_on_static?r.fullResponse?{type:"text",text:e}:e:r.fullResponse?{type:"fn",isStatic:!0,fn:function(){return e}}:function(){return e};for(s=n.utilits.parsText(e),s.scope=c,d=0,f=!0,h=0,v=s.length;v>h;h++)o=s[h],"expression"===o.type&&("="===o.list[0][0]&&(o.list[0]="#bindonce "+o.list[0].slice(1)),l=o.list.join(" | "),"#"===l[0]?(f=!1,function(e){var i,o;return i=!1,o={data:e,setter:function(t){return e.value=t},"finally":function(n){return 1===arguments.length&&o.setter(n),e["static"]=!0,i&&r.onStatic&&t(s)?r.onStatic():void 0}},n.text.$base(c,e,o),i=!0}(o),o["static"]||d++):(i=c.$compile(l,{stringOrOneTime:!0,full:!0,rawExpression:!0,noBind:!0}),i.oneTime?(f=!1,function(e,n){return e.fn=function(){var i;return i=n.fn(c),void 0===i?"":(null===i&&(i=""),e.fn=function(){return i},e["static"]=!0,r.onStatic&&t(s)&&r.onStatic(),i)}}(o,i)):(o.fn=i.fn,i.rawExpression?(o.re=i.rawExpression,i.isSimple&&(o.isSimple=!0,o.simpleVariables=i.simpleVariables)):f=!1),d++));return d?(f?(p=n.utilits.compile.buildSimpleText(e,s),u=r.fullResponse?{type:"fn",fn:p.fn,isSimple:p.isSimple,simpleVariables:p.simpleVariables}:p.fn):(u=n.utilits.compile.buildText(e,s),r.fullResponse&&(u={type:"fn",fn:u})),u):(a=n.utilits.compile.buildText(e,s),e=a(),r.result_on_static?u=r.fullResponse?{type:"text",text:e}:e:(u=function(){return e},r.fullResponse&&(u={type:"fn",isStatic:!0,fn:u})),u)}}(),e.prototype.$evalText=function(e){return this.$compileText(e)(this)},e.prototype.$watchText=function(e,t,r){var i,o,s,l,a,u,c,f,p,d;if(a=this,r=r||{},n.debug.watchText&&console.log("$watchText",e),c=a.$system.watches,o=c[e])r.readOnly||(o.extraLoop=!0);else{if(o={extraLoop:!r.readOnly,isArray:!1,callbacks:[],onStatic:[],src:e},i=a.$compileText(e,{fullResponse:!0,result_on_static:!0,onStatic:function(){var t,n,r,s,l;for(n=i.fn.call(a),o.exp=function(){return n},a.$scanAsync(function(){var t;return o.callbacks.length=0,delete c[e],t=a.$system.watchList.indexOf(o),t>=0?a.$system.watchList.splice(t,1):void 0}),l=o.onStatic,r=0,s=l.length;s>r;r++)(t=l[r])(n);return null}}),"text"===i.type)return{value:i.text};if(o.exp=i.fn,o.value=i.fn(a),c[e]=o,i.isSimple&&a.$system.root.$system.useObserver)for(o.isObserved=!0,d=i.simpleVariables,f=0,p=d.length;p>f;f++)u=d[f],s=n.observer.watch(a.$system.ob,u,function(){return a.$system.obFire[e]?void 0:(a.$system.obFire[e]=!0,a.$system.obList.push(o))});else a.$system.watchList.push(o)}return r.onStatic&&o.onStatic.push(r.onStatic),o.callbacks.push(t),l={$:o,value:o.value,exp:o.exp,stop:function(){var n;if(n=o.callbacks.indexOf(t),n>=0){if(o.callbacks.splice(n,1),0!==o.callbacks.length)return;if(delete c[e],n=a.$system.watchList.indexOf(o),n>=0)return a.$system.watchList.splice(n,1)}}}},n.nextTick=function(){var e,t,r;return r=null,t=[],e=function(){var e,i,o,s,l,a,u;for(r=null,i=t.slice(),t.length=0,a=0,u=i.length;u>a;a++){s=i[a],e=s[0],l=s[1];try{e.call(l)}catch(c){o=c,n.exceptionHandler(o,"$nextTick, error in function",{fn:e})}}return null},function(n){return t.push([n,this]),r?void 0:r=setTimeout(e,0)}}(),n.getController=function(e,r){var i;if(i=r.$ns?(r.$ns.controllers||{})[e]:n.controllers[e]||t&&window[e],!i)throw"Controller isn't found: "+e;if(!(i instanceof Function))throw"Wrong controller: "+e;return i},n.getFilter=function(e,t){var r;if(r=t.$ns?(t.$ns.filters||{})[e]:n.filters[e],!r)throw"Filter not found: "+e;return r},n.text.$base=function(e,t,r){var i,o,s,l,a;if(s=t.list[0],a=s.indexOf(" "),0>a?(o=s.slice(1),s=""):(o=s.slice(1,a),s=s.slice(a)),i=n.text[o],!i)throw"No directive alight.text."+o;return t.list.length>1&&(l=n.utilits.filterBuilder(e,null,t.list.slice(1)),r.setter=function(e){return t.value=l(e)}),i(r.setter,s,e,r)},n.applyBindings=function(e,t,r){var i,o,s,l,a;if(!t)throw"No element";if(e||(e=new n.Scope),o=!e.$system.root.$system.finishBinding_lock,o&&(e.$system.root.$system.finishBinding_lock=!0),r=r||{},c(e,t,r),o)for(e.$system.root.$system.finishBinding_lock=!1,s=e.$system.root.$system.finishBinding_callbacks.slice(),e.$system.root.$system.finishBinding_callbacks.length=0,l=0,a=s.length;a>l;l++)(i=s[l])();return null},n.bootstrap=function(e){var t,i,o,s,l,a,u,c,f,p,d,h,v;if(e||(e=r.find(document,"[al-app]")),e instanceof HTMLElement&&(e=[e]),r.isArray(e)||"number"==typeof e.length)for(f=0,d=e.length;d>f;f++)l=e[f],l.ma_bootstrapped||(l.ma_bootstrapped=!0,t=r.attr(l,"al-app"),t?"#"===t[0]?(u=t.split(" "),c=u[0].substring(1),o=u[1],a=n.apps[c],a?o&&console.error('New controller on exists scope: al-app="'+t+'"'):(n.apps[c]=a=n.Scope(),o&&(i=n.getController(o,a))(a))):(a=n.Scope(),(i=n.getController(t,a))(a)):a=n.Scope(),n.applyBindings(a,l,{skip_attr:"al-app"}));else{if(r.isObject(e)&&e.$el){for(a=n.Scope({prototype:e}),v=r.find(document.body,e.$el),p=0,h=v.length;h>p;p++)s=v[p],n.applyBindings(a,s);return a}n.exceptionHandler("Error in bootstrap","Error in bootstrap",{input:e})}return null}}.call(this),function(){var e,t;n.utilits.getId=function(){var e,t;return t=function(){var e,t,n,r,i,o;for(o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";n>0;)e=Math.floor(n/62),r=62*e,t=n-r,n=e,i=o[t]+i;return i}(),e=1,function(){return t+"#"+e++}}(),n.utilits.filterBuilder=function(e,t,r){var i,o,s,l,a,u,c,f;if(!r||!r.length)return t;for(c=0,f=r.length;f>c;c++)o=r[c],i=o.match(/\s*([\w\d_]+?)\s*:\s*(.*?)\s*$/),i?(a=i[1],u=i[2]):(a=o.trim(),u=null),s=n.getFilter(a,e,u),l=s.call(e,u,e),t=t?function(e,t){return function(n){return e(t(n))}}(l,t):l;return t},n.utilits.clone=e=function(t){var n,r,i,o;if(!t)return t;if("object"==typeof t){if(t instanceof Array)return i=function(){var r,i,o;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],o.push(e(n));return o}();if(t instanceof Date)return new Date(t);if(t.nodeType&&"function"==typeof t.cloneNode)return t;i={};for(r in t)o=t[r],"$alite_id"!==r&&"$$observer"!==r&&(i[r]=e(o));return i}return t},n.utilits.equal=t=function(e,n){var r,i,o,s,l,a,u,c;if(!e)return e===n;if(s=typeof e,l=typeof n,s!==l)return!1;if("object"===s){if(e instanceof Array){if(e.length!==n.length)return!1;for(r=u=0,c=e.length;c>u;r=++u)if(a=e[r],!t(a,n[r]))return!1;return!0}if(e instanceof Date)return e.valueOf()===n.valueOf();if(e.nodeType&&"function"==typeof e.cloneNode)return e===n;o={};for(i in e)if(a=e[i],"$alite_id"!==i&&"$$observer"!==i&&(o[i]=!0,!t(a,n[i])))return!1;for(i in n)if(a=n[i],"$alite_id"!==i&&"$$observer"!==i&&!o[i]&&!t(a,e[i]))return!1;return!0}return e===n},n.utilits.dataByElement=function(e,t){var n;return n=e.al,n||(e.al=n={}),t?(n[t]||(n[t]={}),n[t]):n},n.exceptionHandler=function(e,t,n){var r;return console.warn(t,n),r="string"==typeof e?e:e.stack,console.error(r)}}.call(this),function(){var e,t;t=["instanceof","typeof","in","null","true","false","undefined","function","return"],n.utilits.parsExpression=function(e,r){var i,o,s,l,a,u,c,f,p,d,h,v,m,$,g,y,b,w,x,k,_,D,O,A,L,C,T,S;if(r=r||{},c=r.input||[],u=0,g=[],$=0,_=[],k=[],w=[],x=[],y=[],f=!c.length,m=function(n,r,i,o){var s,l,a,f,p,d,h;for(d="",h=-1,p=!1,f=function(){var e;if(d&&!(t.indexOf(d)>=0||(e=d.split(".")[0],c.indexOf(e)>=0||d[0].match(/[\d\.]/))))return _.push(h),k.push(d),w.push(!1),x.push(!1),!0};u<e.length;){if(a=e[u-1],s=e[u],u+=1,l=e[u],i&&(s.match(/[\d\w_\.\$]/)?(d||(h=u-1),d+=s):("}"===r&&":"===e.substring(u-1).trim()[0]&&(d=""),f()&&(p=u),d="")),s===r)return;p&&" "!==s&&p!==u&&(p=!1),"="===s&&"="!==a&&"="!==l&&(w[w.length-1]=!0),"("!==s||o?"["!==s||o?"{"!==s||o?'"'===s?m(n+1,'"',!1,!0):"'"===s?m(n+1,"'",!1,!0):"|"===s&&0===n&&("|"===l?u+=1:(i=!1,g.push(e.substring($,u-1)),$=u)):m(n+1,"}",!0):m(n+1,"]",i):(p&&(x[x.length-1]=!0),m(n+1,")",i))}return 0===n&&g.push(e.substring($)),f()},m(0,null,!0),_.length){for(l=g[0],a=D=_.length-1;D>=0;a=D+=-1){if(h=_[a],b=k[a],i=w[a],p=x[a],p||i||y.push(b),(p||i)&&(f=!1),s=b.split("."),o=!1,s.length>1&&!i&&(o=p?s.length>2:!0),o){if(v=null,"this"===s[0]&&(s[0]="$$scope",2===s.length&&(v="$$scope."+s[1])),!v)if(d=[],d.push("($$=$$scope."+s[0]+",$$==null)?undefined:"),p){for(T=s.slice(1,+(s.length-3)+1||9e9),O=0,L=T.length;L>O;O++)a=T[O],d.push("($$=$$."+a+",$$==null)?undefined:");d.push("$$."+s[s.length-2]),v="("+d.join("")+")."+s[s.length-1]}else{for(S=s.slice(1,+(s.length-2)+1||9e9),A=0,C=S.length;C>A;A++)a=S[A],d.push("($$=$$."+a+",$$==null)?undefined:");d.push("$$."+s[s.length-1]),v="("+d.join("")+")"}}else v="this"===b?"$$scope":"this"===s[0]?"$$scope."+s.slice(1).join("."):"$$scope."+b;l=l.slice(0,h)+v+l.slice(h+b.length)}g[0]=l}return n.debug.parser&&console.log("parser",g),g.length>1&&(f=!1),r.fullResponse?{result:g,simpleVariables:y,isSimple:f}:g},n.utilits.pars_start_tag="{{",n.utilits.pars_finish_tag="}}",e=function(e){var t,r,i,o,s,l,a,u,c;return c=n.utilits.pars_start_tag,r=n.utilits.pars_finish_tag,a=[],o=0,l=0,i=function(t){var n;return t=t||1,n=e.substring(l,o-t),l=o,n},u=null,s=function(t,n,l){var c,f,p,d;for(t||(u={type:"expression",list:[]},a.push(u)),d=null,c=null;o<e.length;){if(d=c,c=e[o],o+=1,f=d+c,p=e[o],c===n)return;if(!l){if(f===r&&0===t)return u.list.push(i(2)),!0;"("===c?s(t+1,")"):"{"===c?s(t+1,"}"):'"'===c?s(t+1,'"',!0):"'"===c?s(t+1,"'",!0):"|"===c&&0===t&&("|"===p?o+=1:u.list.push(i()))}}},t=function(){var t,n,r,l,u;for(r=null,t=null;o<e.length;)if(r=t,t=e[o],o+=1,n=r+t,n===c){if(u=i(2),u&&a.push({type:"text",value:u}),!s(0))throw"Wrong expression"+e;t=null}return l=i(-1),l?a.push({type:"text",value:l}):void 0},t(),n.debug.parser&&console.log("parsText",a),a},function(){var t,r;return t={},r=function(e){var t,n,r;return r=function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)t=e[r],n={type:t.type,value:t.value},t.list&&(n.list=t.list.slice()),o.push(n);return o}()},n.utilits.parsText=function(n){var i;return i=t[n],i||(t[n]=i=e(n)),r(i)}}()}.call(this),function(){var e;n.utilits.compile=e={},e.cache={},e.Function=Function,e.expression=function(t,r){var i,o,s,l,a,u,c,f,p,d,h,v,m,$,g;if(p=r.hash,f=e.cache[p])return f;if(f={fn:null,isSimple:0,simpleVariables:null},s=t,h=r.no_return||!1,a=n.utilits.parsExpression(s,{input:r.input,fullResponse:!0}),l=a.result,a.isSimple)for(f.isSimple=2,f.simpleVariables=a.simpleVariables,g=a.simpleVariables,m=0,$=g.length;$>m;m++)if(d=g[m],d.indexOf(".")<0){f.isSimple=1;break}s=l[0],u=l.slice(1),h?v="var $$;"+s:r.string&&!u.length?(v="var $$, __ = ("+s+"); return '' + (__ || (__ == null?'':__))",r.rawExpression&&(f.rawExpression="(__="+s+") || (__ == null?'':__)")):v="var $$;return ("+s+")";try{r.input?(i=r.input.slice(),i.unshift("$$scope"),i.push(v),c=e.Function.apply(null,i)):c=e.Function("$$scope",v)}catch(y){throw o=y,n.exceptionHandler(o,"Wrong expression: "+t,{src:t,cfg:r}),"Wrong expression: "+s}return f.fn=c,f.filters=u.length?u:null,e.cache[p]=f},e.cacheText={},e.buildText=function(t,n){var r,i,o,s,l,a;if(i=e.cacheText[t])return function(){return i.call(n)};for(s=[],o=l=0,a=n.length;a>l;o=++l)r=n[o],"expression"===r.type?s.push(r.fn?"this["+o+"].fn(this.scope)":"((x=this["+o+"].value) || (x == null?'':x))"):r.value&&s.push('"'+r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"');return s=s.join(" + "),i=e.Function("var x; return ("+s+")"),e.cacheText[t]=i,function(){return i.call(n)}},e.cacheSimpleText={},e.buildSimpleText=function(t,n){var r,i,o,s,l,a,u,c,f;if(l=e.cacheSimpleText[t],l||!n)return l||null;for(a=[],s=!0,u=[],o=c=0,f=n.length;f>c;o=++c)r=n[o],"expression"===r.type?(a.push("("+r.re+")"),r.isSimple?u.push.apply(u,r.simpleVariables):s=!1):r.value&&a.push('"'+r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"');return a=a.join(" + "),i=e.Function("$$scope","var $$, __; return ("+a+")"),l={fn:i},s&&(l.isSimple=!0,l.simpleVariables=u),e.cacheSimpleText[t]=l,l}}.call(this),function(){var e,t,i,o,s,l,a,u;for(n.text.bindonce=function(e,t,n,r){return r["finally"](n.$eval(t))},t=n.directives.al,t.debug={priority:5e3,init:function(e,t,r){return n.debug=t?r.$eval(t):-1}},t.text=function(e,t,n){var i,o;return i="",o={start:function(){return o.watchModel(),o.initDom()},updateDom:function(t){return(void 0===t||null===t)&&(t=""),r.text(e,t)},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=e.value},initDom:function(){return o.updateDom(i)}}},t.value=function(e,t,i){var o,s;return o=null,s={changing:!1,onDom:function(){return r.on(e,"input",s.updateModel),r.on(e,"change",s.updateModel)
},updateModel:function(){return n.nextTick(function(){var n;return n=r.val(e),s.changing=!0,i.$setValue(t,n),i.$scan(function(){return s.changing=!1})})},watchModel:function(){var e;return e=i.$watch(t,s.updateDom,{readOnly:!0}),o=e.value},updateDom:function(t){return s.changing?void 0:void 0!==t&&null!==t?r.val(e,t):void 0},initDom:function(){return s.updateDom(o)},start:function(){return s.onDom(),s.watchModel(),s.initDom()}}},e=function(e){return{priority:10,init:function(t,i,o,s){var l;return l={callback:o.$compile(i,{no_return:!0,noBind:!0}),start:function(){return l.onDom(),l.stop=s.takeAttr("al-click-stop")},onDom:function(){return r.on(t,e,l.doCallback)},doCallback:function(e){if(l.stop||(e.preventDefault(),e.stopPropagation()),!r.attr(t,"disabled")){try{l.callback(o)}catch(s){e=s,n.exceptionHandler(e,"al-click, error in expression: "+i,{name:i,scope:o,element:t})}return l.stop&&o.$eval(l.stop)&&(e.preventDefault(),e.stopPropagation()),o.$scan()}}}}}},t.click=e("click"),t.dblclick=e("dblclick"),t.submit=function(e,t,i){var o;return o={callback:i.$compile(t,{no_return:!0,noBind:!0}),start:function(){return o.onDom()},onDom:function(){return r.on(e,"submit",o.doCallback)},doCallback:function(r){r.preventDefault(),r.stopPropagation();try{o.callback(i)}catch(s){r=s,n.exceptionHandler(r,"al-submit, error in expression: "+t,{name:t,scope:i,element:e})}return i.$scan()}}},t.controller={priority:500,restrict:"AE",init:function(e,t,r,i){var o,s;return s=r.$new(),t&&(o=n.getController(t,s))(s),n.applyBindings(s,e,{skip_attr:i.skippedAttr()}),{owner:!0}}},t.checked={priority:100,init:function(e,t,n){var i,o;return i=!1,o={changing:!1,start:function(){return o.onDom(),o.watchModel(),o.initDom()},onDom:function(){return r.on(e,"change",o.updateModel)},updateModel:function(){var i;return i=r.prop(e,"checked"),o.changing=!0,n.$setValue(t,i),n.$scan(function(){return o.changing=!1})},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=!!e.value},updateDom:function(t){return o.changing?void 0:r.prop(e,"checked",!!t)},initDom:function(){return o.updateDom(i)}}}},t.radio={priority:10,init:function(e,t,n,i){var o,s;return o=!1,s={changing:!1,start:function(){return s.makeValue(),s.onDom(),s.watchModel(),s.initDom()},makeValue:function(){var e,t;return e=i.takeAttr("al-value"),t=e?n.$eval(e):i.takeAttr("value"),s.value=t},onDom:function(){return r.on(e,"change",s.updateModel)},updateModel:function(){return s.changing=!0,n.$setValue(t,s.value),n.$scan(function(){return s.changing=!1})},watchModel:function(){var e;return e=n.$watch(t,s.updateDom,{readOnly:!0}),o=e.value},updateDom:function(t){return s.changing?void 0:r.prop(e,"checked",t===s.value)},initDom:function(){return s.updateDom(o)}}}},t.css={priority:30,init:function(e,t,i){var o;return o={start:function(){return o.parsLine(),o.prepare()},parsLine:function(){var r,s,l,a,u,c;for(o.list=l=[],c=t.split(","),a=0,u=c.length;u>a;a++)r=c[a],s=r.indexOf(":"),0>s?n.exceptionHandler(r,"al-css, error in expression: "+t,{exp:t,e:r,scope:i,element:e}):l.push({css:r.slice(0,+(s-1)+1||9e9).trim().split(" "),exp:r.slice(s+1).trim()});return null},prepare:function(){var e,t,n,r,s,l;for(l=o.list,r=0,s=l.length;s>r;r++)t=l[r],e=function(e){return function(t){return o.draw(e,t)}}(t),n=i.$watch(t.exp,e,{readOnly:!0,init:!0});return null},draw:function(t,n){var i,o,s,l,a,u,c,f,p;if(n){for(u=t.css,f=[],o=0,l=u.length;l>o;o++)i=u[o],f.push(r.addClass(e,i));return f}for(c=t.css,p=[],s=0,a=c.length;a>s;s++)i=c[s],p.push(r.removeClass(e,i));return p}}}},o=function(e){var t;return t={priority:700,init:function(t,n,i){var o;return o=i.$eval(n),!o===e?(r.remove(t),{owner:!0}):void 0}}},n.directives.bo["if"]=o(!0),n.directives.bo.ifnot=o(!1),t["if"]={priority:700,init:function(e,t,i,o){var s,l,a,u,c,f;return u=null,l=null,s=null,f=null,a=!1,c={direction:!0,owner:!0,start:function(){return c.prepare(),c.watchModel(),c.initUpdate()},prepare:function(){return s=e,f=r.createComment(" "+o.attrName+": "+t+" "),r.before(e,f),r.remove(e)},updateDom:function(e){if(!e===c.direction){if(!l)return;return l.$destroy(),c.removeDom(u),l=null,u=null}if(!l)return u=r.clone(s),c.insertDom(f,u),l=i.$new(),n.applyBindings(l,u,{skip_attr:o.skippedAttr()})},watchModel:function(){var e;return e=i.$watch(t,c.updateDom,{readOnly:!0}),a=!!e.value},initUpdate:function(){return c.updateDom(a)},removeDom:function(e){return r.remove(e)},insertDom:function(e,t){return r.after(e,t)}}}},t.ifnot={priority:700,init:function(){return t=n.directives.al["if"].init.apply(this,arguments),t.direction=!1,t}},t.show=function(e,t,n){var i,o;return i=!1,o={showDom:function(){return r.show(e)},hideDom:function(){return r.hide(e)},updateDom:function(e){return e?o.showDom():o.hideDom()},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=e.value},initDom:function(){return o.updateDom(i)},start:function(){return o.watchModel(),o.initDom()}}},t.hide=function(e,t,r,i){var o;return o=n.directives.al.show(e,t,r,i),o.updateDom=function(e){return e?o.hideDom():o.showDom()},o},t.app={priority:2e3,init:function(){return{owner:!0}}},t.stop={priority:-10,restrict:"AE",init:function(){return{owner:!0}}},t.init=function(e,t,r){var i,o;try{o=r.$compile(t,{no_return:!0,noBind:!0}),o(r)}catch(s){i=s,n.exceptionHandler(i,"al-init, error in expression: "+t,{exp:t,scope:r,element:e})}return r.$scan({late:!0})},t.include={priority:100,init:function(e,t,i,o){var s,l,a,u,c,f;return a=null,l=null,f=null,s=null,u=null,c={owner:!0,topElement:null,start:function(){return c.prepare(),c.watchModel(),c.initUpdate()},prepare:function(){return l=e,f=r.createComment(" "+o.attrName+": "+t+" "),r.before(e,f),r.remove(e)},loadHtml:function(e){return r.ajax(e)},removeBlock:function(){return a&&(a.$destroy(),a=null),s?(c.removeDom(s),s=null):void 0},insertBlock:function(e){return s=r.clone(l),r.html(s,e),c.insertDom(f,s),a=i.$new(),n.applyBindings(a,s,{skip_attr:o.skippedAttr()})},updateDom:function(e){return e?c.loadHtml({cache:!0,url:e,success:function(e){return c.removeBlock(),c.insertBlock(e)},error:c.removeBlock}):c.removeBlock()},removeDom:function(e){return r.remove(e)},insertDom:function(e,t){return r.after(e,t)},watchModel:function(){var e;return e=i.$watch(t,c.updateDom,{readOnly:!0}),u=e.value},initUpdate:function(){return c.updateDom(u)}}}},t.html={priority:100,init:function(e,t,i,o){var s,l,a;return s=null,a=function(t){return s&&(s.$destroy(),s=null),t?(r.html(e,t),s=i.$new(),n.applyBindings(s,e,{skip_attr:o.skippedAttr()})):void r.html(e,"")},l=i.$watch(t,a,{readOnly:!0}),a(l.value),{owner:!0}}},n.directives.bo["switch"]={priority:500,init:function(e,t,r,i){var o;return o=r.$new(),o.$switch={value:r.$eval(t),on:!1},n.applyBindings(o,e,{skip_attr:i.skippedAttr()}),{owner:!0}}},n.directives.bo.switchWhen={priority:500,init:function(e,t,n){return n.$switch.value!==t?(r.remove(e),{owner:!0}):n.$switch.on=!0}},n.directives.bo.switchDefault={priority:500,init:function(e,t,n){return n.$switch.on?(r.remove(e),{owner:!0}):null}},t.src=function(e,t,n){var i,o;return o=function(t){return t||(t=""),r.attr(e,"src",t)},i=n.$watchText(t,o,{readOnly:!0}),o(i.value)},n.directives.bo.src=function(e,t,n){var i;return i=n.$evalText(t),i?r.attr(e,"src",i):void 0},t.enable=function(e,t,n){var i,o;return i=function(t){return t?r.removeAttr(e,"disabled"):r.attr(e,"disabled","disabled")},o=n.$watch(t,i,{readOnly:!0}),i(o.value)},t.disable=function(e,t,n){var i,o;return i=function(t){return t?r.attr(e,"disabled","disabled"):r.removeAttr(e,"disabled")},o=n.$watch(t,i,{readOnly:!0}),i(o.value)},t.readonly=function(e,t,n){var i,o;return i=function(t){return r.prop(e,"readOnly",!!t)},o=n.$watch(t,i,{readOnly:!0}),i(o.value)},u=["keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","focus","blur","change"],s=function(e){return t[e]=function(t,i,o){var s;return s={start:function(){return s.makeCaller(),s.onDom()},makeCaller:function(){return s.caller=o.$compile(i,{no_return:!0,noBind:!0,input:["$event"]})},onDom:function(){return r.on(t,e,s.callback)},callback:function(r){try{s.caller(o,r)}catch(l){r=l,n.exceptionHandler(r,e+", error in expression: "+i,{exp:i,scope:o,element:t})}return o.$scan()}}}},l=0,a=u.length;a>l;l++)i=u[l],s(i);t.cloak=function(e,t,n,i){return r.removeAttr(e,i.attrName),t?r.removeClass(e,t):void 0},t.focused=function(e,t,n){var i,o;return i=!1,o={changing:!1,updateModel:function(e){return o.changing?void 0:(o.changing=!0,n.$setValue(t,e),n.$scan(function(){return o.changing=!1}))},onDom:function(){return r.on(e,"focus",function(){return o.updateModel(!0)}),r.on(e,"blur",function(){return o.updateModel(!1)})},updateDom:function(t){return o.changing?void 0:(o.changing=!0,t?r.focus(e):r.blur(e),o.changing=!1)},watchModel:function(){var e;return e=n.$watch(t,o.updateDom,{readOnly:!0}),i=e.value},initDom:function(){return o.updateDom(i)},start:function(){return o.onDom(),o.watchModel(),o.initDom()}}}}.call(this),function(){n.directives.al.repeat={priority:1e3,init:function(e,t,i,o){var s;return s={owner:!0,start:function(){return s.prepare(),s.parsExpression(),s.prepareDom(),s.watchModel(),s.initUpdateDom()},prepare:function(){var e;return e=o.takeAttr("al-controller"),s.childController=e?n.getController(e,i):null},parsExpression:function(){var e,n;if(n=t,e=n.match(/(.*) store to ([\w\.]+)/),e&&(s.storeTo=e[2],n=e[1]),e=n.match(/(.*) track by ([\w\.\$\(\)]+)/),e&&(s.trackExpression=e[2],n=e[1]),e=n.match(/\s*(\w+)\s+in\s+(.+)/),!e)throw"Wrong repeat: "+t;return s.nameOfKey=e[1],s.expression=e[2]},watchModel:function(){return s.watch=i.$watch(s.expression,s.updateDom,{isArray:!0,readOnly:!s.storeTo})},initUpdateDom:function(){return s.updateDom(s.watch.value)},prepareDom:function(){return s.base_element=e,s.top_element=r.createComment(" "+t+" "),r.before(e,s.top_element),r.remove(e)},makeChild:function(e,t,n){var r;return r=i.$new(),s.updateChild(r,e,t,n),s.childController&&s.childController(r),r},updateChild:function(e,t,n,r){return e[s.nameOfKey]=t,e.$index=n,e.$first=0===n,e.$last=n===r.length-1},rawUpdateDom:function(e,t){var n,i,o,s,l,a;for(o=0,l=e.length;l>o;o++)n=e[o],r.remove(n);for(s=0,a=t.length;a>s;s++)i=t[s],r.after(i.after,i.element);return null},updateDom:function(){var t,l,a,u,c,f;return f=[],l=null,c=null,u=null,a=null,t=0,function(p){var d,h,v,m,$,g,y,b,w,x,k,_,D,O,A,L,C,T,S,M,B,E,j,N;for(u||("$index"===s.trackExpression?(l={},u=function(){var e;return e=t,l[e]||null},a=function(e){var t;return t=e.$id,t&&delete l[t],null},c=function(e,n){var r;return r=t,n.$id=r,l[r]=n,null}):s.trackExpression?(l={},A=i.$compile(s.trackExpression,{input:["$id",s.nameOfKey]}),C=function(e){var t;return(t=e.$alite_id)?t:t=e.$alite_id=n.utilits.getId()},u=function(e){var t;return t=A(C,e),t?l[t]:null},a=function(e){var t;return t=e.$id,t&&delete l[t],null},c=function(e,t){var n;return n=A(C,e),t.$id=n,l[n]=t,null}):window.Map?(l=new Map,u=function(e){return l.get(e)},a=function(e){return l["delete"](e.item),null},c=function(e,t){return l.set(e,t),null}):(l={},u=function(e){var t;return t=e.$alite_id,t?l[t]:null},a=function(e){var t;return t=e.$id,t&&delete l[t],null},c=function(e,t){var r;return r=n.utilits.getId(),e.$alite_id=r,t.$id=r,l[r]=t,null})),p&&p.length||(p=[]),s.storeTo&&(i.$setValue(s.storeTo,p),i.$scan({late:!0})),b=s.top_element,v=[],k=[],L=0,B=f.length;B>L;L++)x=f[L],x.active=!1;for(t=T=0,E=p.length;E>T;t=++T)g=p[t],x=u(g),x&&(x.active=!0);for(m=function(){var e,t,n;for(n=[],e=0,t=f.length;t>e;e++)x=f[e],x.active||(x.prev&&(x.prev.next=x.next),x.next&&(x.next.prev=x.prev),a(x),x.scope.$destroy(),n.push(x.element));return n}(),d=[],_=null,D=null,t=S=0,j=p.length;j>S;t=++S)if(g=p[t],y=g,g=g||{},x=u(g)){if(s.updateChild(x.scope,g,t,p),x.prev===D){D=x,b=x.element,x.active=!0,k.push(x);continue}x.prev=D,D&&(D.next=x),v.push({element:x.element,after:D?D.element:s.top_element}),b=x.element,D=x,x.active=!0,k.push(x)}else h=s.makeChild(y,t,p),e=r.clone(s.base_element),d.push([h,e]),v.push({element:e,after:b}),x={scope:h,element:e,prev:D,next:null,active:!0,item:g},c(g,x),D?(w=D.next,D.next=x,x.next=w,w&&(w.prev=x)):0===t&&f[0]&&(w=f[0],x.next=w,w.prev=x),D=x,b=e,k.push(x);for(f=k,s.rawUpdateDom(m,v),O=o.skippedAttr(),M=0,N=d.length;N>M;M++)$=d[M],n.applyBindings($[0],$[1],{skip_attr:O});return null}}()}}},n.directives.bo.repeat={priority:1e3,init:function(e,t,r,i){var o;return o=n.directives.al.repeat.init(e,t,r,i),o.start=function(){return o.prepare(),o.parsExpression(),o.prepareDom(),o.watch={value:r.$eval(o.expression)},o.initUpdateDom()},o}}}.call(this),function(){var e,t,r;n.filters.filter=function(e,t){var n;return n=t.$compile(e),function(e){var t,r,i,o,s,l,a;if(r=n(),!r)return e;if("string"==typeof r)r={$:r};else if("object"!=typeof r)return e;return l=function(){var n,l,u;for(u=[],n=0,l=e.length;l>n;n++)if(s=e[n],"object"==typeof s){if(i=!0,r.$){i=!1,t=r.$.toLowerCase();for(o in s)if(a=s[o],"$alite_id"!==o&&(""+a).toLowerCase().indexOf(t)>=0){i=!0;break}if(!i)continue}i=!0;for(o in r)if(a=r[o],t=s[o],t&&(""+t).toLowerCase().indexOf((""+a).toLowerCase())<0){i=!1;break}if(!i)continue;u.push(s)}else{if(!r.$)continue;if(t=r.$.toLowerCase(),(""+s).toLowerCase().indexOf(t)<0)continue;u.push(s)}return u}()}},n.filters.slice=function(e,t){var n;return n=t.$compile("["+e+"]"),function(e){return[].slice.apply(e,n())}},e=function(e){return 10>e?"0"+e:""+e},t=function(t,n){var r,i,o,s,l;if(!n)return"";for(o=[[/yyyy/g,n.getFullYear()],[/mm/g,e(n.getMonth()+1)],[/dd/g,e(n.getDate())],[/HH/g,e(n.getHours())],[/MM/g,e(n.getMinutes())],[/SS/g,e(n.getSeconds())]],i=t,s=0,l=o.length;l>s;s++)r=o[s],i=i.replace(r[0],r[1]);return i},n.filters.date=function(e){return function(n){return t(e,n)}},n.filters.generator=function(){var e;return e=[],function(t){if(e.length>=t)e.length=t;else for(;e.length<t;)e.push({});return e}},r=function(e){return JSON.stringify(n.utilits.clone(e),null,4)},n.filters.json=function(){return r}}.call(this),function(){var e,t,i,o,s,l,a,u;n.observer=a={},u={$system:!0,$parent:!0,$ns:!0,$$scope:!0,$$path:!0,$$isArray:!0,$$observer:!0,$$cbs:!0},l=function(e){return r.isObject(e)?!0:r.isArray(e)},a.watch=function(e,n,r){var i,o,s,l,a;for(o=e.wtree,a=n.split("."),s=0,l=a.length;l>s;s++)i=a[s],o[i]||(o[i]={$$cbs:[]}),o=o[i],o.$$cbs.push(r);return t(e,n),r},t=function(e,t){var n,i,o,s,a,u,c;for(u=e.scope,c=e.tree,o=t.split("."),a="",n=0,s=o.length;s>n;){if(i=o[n++],s===n){if(!r.isArray(u[i]))break}else if(!l(u[i]))break;c[i]||(c[i]={}),c=c[i],a?a+="."+i:a=i,u=u[i],u.$$observer||(u.$$observer={}),c.$$scope||(c.$$scope=u,c.$$path=a,u.$$observer[e.key]=c,r.isArray(u)?(c.$$isArray=!0,Array.observe(u,e.handler)):Object.observe(u,e.handler))}return null},i=function(e,t){var n,r,i,s,l;for(r=e.wtree,l=t.split("."),i=0,s=l.length;s>i&&(n=l[i],r=r[n],r);i++);return r?o(e,r,t):void 0},o=function(e,n,r){var i,s;s=!1;for(i in n)u[i]||o(e,n[i],""+r+"."+i)&&(s=!0);return!s&&n.$$cbs.length?(t(e,r),!0):!1},a.unwatch=function(e,t,n){var r,i,o,s,l,a,u;for(s=e.wtree,u=t.split("."),l=0,a=u.length;a>l;l++)o=u[l],r=s[o],r&&(i=r.$$cbs.indexOf(n),i>=0&&r.$$cbs.splice(i,1),s=r);return null},s=function(e,t,n){var r,i,o,s,l,a,u,c,f;for(o=e,c=t.split("."),s=0,a=c.length;a>s;s++)i=c[s],o=o[i]||{};if(o.$$cbs)for(f=o.$$cbs,l=0,u=f.length;u>l;l++)(r=f[l])(n);return null},e=function(t,n,i){var o,s,l;i&&i!==n.$$scope&&console.error("Observe: fake scope"),s=n.$$scope,r.isArray(n.$$scope)?(n.$$isArray=null,Array.unobserve(n.$$scope,t.handler)):Object.unobserve(n.$$scope,t.handler),n.$$scope.$$observer[t.key]=null,n.$$scope=null,n.$$path=null;for(o in n)l=n[o],u[o]||r.isObject(l)&&e(t,n[o]);return null},a.observe=function(t,r){var o;return r=r||{},o={key:n.utilits.getId(),scope:t,tree:{},wtree:{},path:"",rootEvent:r.rootEvent,active:!r.noActive,handler:function(t){var n,r,a,c,f,p,d,h;for(d=0,h=t.length;h>d;d++)if(n=t[d],c=n.object,c.$$observer)if(f=c.$$observer[o.key],f.$$isArray)s(o.wtree,f.$$path,null);else{if(r=n.name,u[r])continue;p=c[r],a=f.$$path?""+f.$$path+"."+r:r,"add"===n.type?(l(p)&&i(o,a),s(o.wtree,a,p)):"update"===n.type?(f[r]&&l(n.oldValue)&&e(o,f[r],n.oldValue),l(p)&&i(o,a),s(o.wtree,a,null)):"delete"===n.type&&(l(n.oldValue)&&e(o,f[r],n.oldValue),s(o.wtree,a,null)),f===o.tree&&o.rootEvent(a,p)}return null}},function(e,t){return e.$$observer||(e.$$observer={}),t=o.tree,t.$$scope?void 0:(t.$$scope=e,t.$$path="",e.$$observer[o.key]=t,Object.observe(e,o.handler))}(o.scope,o.tree),o},a.unobserve=function(t){return e(t,t.tree,t.scope),t.scope=null,t.tree=null,t.wtree=null,t.rootEvent=null,null},a.reobserve=function(t,n){return t.tree[n]&&e(t,t.tree[n]),l(t.scope[n])?i(t,n):void 0},a.fire=function(e,t){return s(e.wtree,t,null)},a.deliver=function(e){return Object.deliverChangeRecords(e.handler)}}.call(this),n}if("function"==typeof define)define(function(){var t=e();return t.makeInstance=e,t});else if("object"==typeof module&&"object"==typeof module.exports){var t=e();t.makeInstance=e,module.exports=t}else if("function"==typeof alightInitCallback)alightInitCallback(e);else{var t=e({globalControllers:!0});window.alight=t,window.f$=t.f$,f$.ready(t.bootstrap)}}();
